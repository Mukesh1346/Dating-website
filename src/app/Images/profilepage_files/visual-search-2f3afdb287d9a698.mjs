(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["91533"],{345463:function(e,t,a){a.r(t),a.d(t,{default:()=>i});let l={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:o=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MobileFlashlightPageFetchData_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:o,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"7cd65bb908c0282c47af2a2dc30819668fdb6b1e8614019a84c0ea7e8c4cad07",metadata:{},name:"MobileFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}};l.hash="a0953a7ea15ce447a2452bbeca8586ba";let i=l;var n,o,s,r=l.default||l;if("query"===r.params.operationKind)if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(r);else{let e=[r.params.name,r.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[e]=r}},807352:function(e,t,a){a.r(t),a.d(t,{default:()=>i});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchData_pin",selections:[{args:null,kind:"FragmentSpread",name:"MobileFlashlightPage_pin"}],type:"Pin",abstractKey:null};l.hash="df8cf9d2521b1a82156cc4ecd7b04884";let i=l},272636:function(e,t,a){a.r(t),a.d(t,{default:()=>i});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPage_pin",selections:[{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};l.hash="a4c8c4488bd813d69ca9e96072e3d2d7";let i=l},573631:function(e,t,a){a.d(t,{G:()=>s,b:()=>r});var l=a(667294),i=a(616550),n=a(785893);let o=(0,l.createContext)(!0);function s({children:e}){let t=(0,i.TH)(),[a,s]=(0,l.useState)(!0),r=(0,l.useRef)(t);return(0,l.useEffect)(()=>{r.current!==t&&(r.current=t,s(!1))},[t]),(0,n.jsx)(o.Provider,{value:a,children:e})}function r(){return(0,l.useContext)(o)}},524884:function(e,t,a){a.d(t,{Z:()=>i});var l=a(785893);let i=(0,l.jsx)("svg",{fill:"none",height:"5",viewBox:"0 0 37 5",width:"37",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("rect",{fill:"#E9E9E9",height:"5",rx:"2.5",width:"37"})})},284778:function(e,t,a){a.d(t,{Z:()=>c});var l=a(667294),i=a(883119),n=a(527895),o=a(647709),s=a(987563),r=a(785893);function c(e){(0,l.useContext)(s.Z),(0,o.ZP)();let{alt:t,borderStyle:a,color:c,children:d,crossOrigin:u,decoding:h,elementTiming:p,fetchPriority:_,fit:m,loading:g,naturalHeight:f,naturalWidth:y,onError:x,onLoad:v,role:b,sizes:S,src:w,srcSet:T,suppressViewTransitionTags:P,_enableViewTransitions:j,_fixCompletedOnLoad:F}=e;return(0,r.jsx)(n.Z,{_enableViewTransitions:j,borderStyle:a,imageFit:m,suppressViewTransitionTags:P,type:"image",children:(0,r.jsx)(i.Ee,{_fixCompletedOnLoad:F,alt:t,color:c,crossOrigin:u,decoding:h,elementTiming:p,fetchPriority:_,fit:m,loading:g,naturalHeight:f,naturalWidth:y,onError:x,onLoad:v,role:b,sizes:S,src:w,srcSet:T,children:d})})}},291892:function(e,t,a){a.d(t,{Z:()=>r});var l=a(667294),i=a(284778),n=a(785893);let o=e=>document.querySelector(`img[src="${e}"]`)||null,s=(e,t,a)=>{let i=(0,l.useRef)(null),n=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(e!==i.current||a&&a!==n.current){i.current=e??null;let a=o(e);a?.complete&&t()}n.current=a},[e,t,a])};function r({alt:e,children:t,color:a,elementTiming:l,fetchPriority:o,isActive:r=!1,naturalHeight:c,naturalWidth:d,onLoad:u,src:h,fit:p="none",srcSet:_,...m}){return s(h,u,r),(0,n.jsx)(i.Z,{...m,alt:e,color:a,elementTiming:l,fetchPriority:o,fit:p,naturalHeight:c,naturalWidth:d,onLoad:u,src:h,srcSet:_,children:t})}},62937:function(e,t,a){a.d(t,{Z:()=>l});let l=(0,a(667294).createContext)("undefined"!=typeof window?window:null)},244074:function(e,t,a){a.d(t,{Z:()=>i});var l=a(667294);let i=()=>{let e=(0,l.useRef)(!1);return(0,l.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},357823:function(e,t,a){a.d(t,{Z:()=>r});var l=a(883119),i=a(980787),n=a(525839),o=a(667294),s=a(785893);function r({auxData:e,enabled:t,onPull:a,refreshing:r,viewParameter:c}){let d=(0,n.ZP)(),{logContextEvent:u}=(0,i.v)(),h=4079===c,{position:p,startYRefCurrent:_,pullDistance:m}=function({enabled:e,onSelect:t,refreshing:a}){let l=(0,o.useRef)(null),[i,n]=(0,o.useState)(0),[s,r]=(0,o.useState)(!1),c=a?0:i/250,d=c>0,u=()=>{r(!1),n(0)};return(0,o.useEffect)(()=>{if(e){let e=e=>{window.scrollY<=0&&!a&&(l.current=e.touches[0].clientY)},o=e=>{if(l.current){let t=(e.touches[0].clientY-l.current)*.5;t>0&&(n(t),e.preventDefault())}},s=()=>{l.current&&(r(!0),t({pullDistance:i,position:c,resetState:u}),l.current=null)};return window.addEventListener("touchstart",e),window.addEventListener("touchmove",o,{passive:!1}),window.addEventListener("touchend",s),()=>{window.removeEventListener("touchstart",e),window.removeEventListener("touchmove",o,{passive:!1}),window.removeEventListener("touchend",s)}}},[e,t,i,a,c]),{pullDistance:i,hasStartPulling:d,position:c,startYRefCurrent:l.current,PULL_MENU_DISTANCE:250,isExecuted:s}}({enabled:t,onSelect:t=>{let{pullDistance:l,resetState:i}=t;l>=120&&(u({view_type:1,event_type:158,view_parameter:h?4079:92,aux_data:h?e:{}}),a()),i()},refreshing:r}),g=Math.min(p,1),f=d._('Pull to refresh', 'Pull down on grid to refresh items', 'Pull down on grid to refresh items');return(0,s.jsx)(l.xu,{children:t&&(0,s.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:g,transition:null===_?"all .3s ease-out":void 0}},display:"flex",height:120*p,justifyContent:"center",children:(0,s.jsx)(l.JO,{accessibilityLabel:f,icon:_&&m<120?"arrow-circle-down":"arrow-circle-up",size:40})})})}},130858:function(e,t,a){a.d(t,{Z:()=>o});var l=a(883119),i=a(647709),n=a(785893);let o=()=>{let e=(0,i.HG)();return(0,n.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:e?{paddingTop:"0px",paddingBottom:"0px",marginTop:"0px",marginBottom:"0px"}:{paddingTop:"4px",paddingBottom:"4px",marginTop:"-4px",marginBottom:"-4px"}},"data-test-id":"initial-feed-fetch"})}},867552:function(e,t,a){a.d(t,{D:()=>l,a:()=>i});let{Provider:l,useMaybeHook:i}=(0,a(729434).Z)("unauthPageWrapperContext")},625453:function(e,t,a){function l({isDesktop:e}){return+!e}a.d(t,{Z:()=>l})},648200:function(e,t,a){a.d(t,{Z:()=>s});var l=a(647709),i=a(535701),n=a(642859),o=a(785893);let s=({children:e})=>{let t=(0,l.HG)();return!(0,i.Z)().isAuth&&t?(0,o.jsx)(n.x,{children:e}):e}},348268:function(e,t,a){a.d(t,{G9:()=>o,SY:()=>r,kk:()=>n,mb:()=>c,s:()=>s});var l=a(93966),i=a(625453);let n=({isDesktop:e})=>{let t=(0,i.Z)({isDesktop:e});return t?-t:0},o=-2,s=({trafficSource:e,deviceType:t,experimentalGutter:a})=>{let i=a??4*l.jC;return"desktop"===t?i:"board"===e?4:void 0},r=({deviceType:e,customMWebColumnWidth:t,experimentalColumnWidth:a})=>{let i=a??l.yF;return"desktop"===e?i:t||200},c=({gutterWidth:e,itemWidth:t,className:a,minColumns:i=l.yc,maxColumns:n=l.g5})=>{let o=t+e;return Array.from({length:n+1-i},(e,t)=>t+i).map(t=>({minWidth:t===i?0:t*o,maxWidth:t===n?null:(t+1)*o-1,styles:`
      .${a} {
        max-width: ${t*o-e}px;
      }
      `})).map(({minWidth:e,maxWidth:t,styles:a})=>`
    @media (min-width: ${e}px) ${t?`and (max-width: ${t}px)`:""} {
      ${a}
    }
  `).join("")}},79293:function(e,t,a){a.d(t,{Z:()=>_});var l=a(667294),i=a(883119),n=a(93966),o=a(369416),s=a(647709),r=a(640168),c=a(785893);let d="PinGridSkeletonLoader__tall",u="PinGridSkeletonLoader__short",h=({size:e})=>(0,c.jsx)(i.xu,{padding:1,children:(0,c.jsx)("div",{className:"tall"===e?d:u})}),p=({children:e})=>(0,c.jsx)(i.kC,{direction:"column",gap:{row:0,column:2},children:e}),_=({partialViewportWidth:e})=>{let t="desktop"===(0,s.ZP)(),a=t?n.yF:n.tG;return(0,c.jsxs)(l.Fragment,{children:[(0,c.jsx)(o.Z,{unsafeCSS:[{name:d,height:250},{name:u,height:150}].map(({name:e,height:t})=>(0,r.Z)({name:e,width:a,height:t})).join("")}),(0,c.jsx)(i.xu,{"data-test-id":"pin-grid-skeleton-loader",marginEnd:n.qG,marginStart:n.qG,children:t?(0,c.jsxs)(i.kC,{direction:"row",gap:{row:n.jC,column:0},children:[(0,c.jsx)(p,{children:(0,c.jsx)(h,{size:"tall"})}),(0,c.jsx)(p,{children:(0,c.jsx)(h,{size:"short"})}),(0,c.jsx)(p,{children:(0,c.jsx)(h,{size:"tall"})}),!e&&(0,c.jsx)(p,{children:(0,c.jsx)(h,{size:"short"})})]}):(0,c.jsxs)(i.kC,{direction:"row",justifyContent:"center",overflow:"hidden",children:[(0,c.jsxs)(p,{children:[(0,c.jsx)(h,{size:"tall"}),(0,c.jsx)(h,{size:"short"}),(0,c.jsx)(h,{size:"tall"})]}),(0,c.jsxs)(p,{children:[(0,c.jsx)(h,{size:"short"}),(0,c.jsx)(h,{size:"tall"}),(0,c.jsx)(h,{size:"short"}),(0,c.jsx)(h,{size:"tall"})]})]})})]})}},32228:function(e,t,a){a.d(t,{Z:()=>u});var l=a(667294),i=a(883119),n=a(879921),o=a(816358),s=a(809295),r=a(949044),c=a(974705),d=a(785893);function u({oneBarModules:e,showIndicator:t,setProductFiltersModalIsOpen:a,showProductFilters:u=!1}){let h=(0,l.useRef)(null),p=(0,l.useRef)(null),[_,m]=(0,l.useState)(0);(0,l.useEffect)(()=>{setTimeout(()=>{p.current?.scrollTo({top:0,left:_,behavior:"smooth"})},1e3)},[_]);let g=new s.ZP;(0,l.useEffect)(()=>{let e=h.current;return e&&o.Z.addObstruction("top",e),()=>{e&&o.Z.removeObstruction("top",e)}});let f=e.map(e=>(0,r.Z)(c.Z,!0)(e));return(0,d.jsx)(i.xu,{ref:h,color:"default","data-root-margin":"search-one-bar",height:54,overflow:"hidden",children:(0,d.jsx)(i.xu,{ref:p,"data-test-id":"mweb-onebar-search",height:64,overflow:"auto",children:(0,d.jsx)(i.kC,{gap:1,maxWidth:"100%",children:f.map((e,l)=>(0,d.jsx)(n.Z,{hasProductFiltersApplied:t,impressionsFramework:g,index:l,module:e,oneBarModulesKey:null,onFilterButtonClick:()=>{u&&a?.(!0)},setLatestSelectedGuideX:m,showMWebProductFilters:u},`OneBarModule-${e.id||""}`))})})})}},94207:function(e,t,a){a.d(t,{Nu:()=>n,q:()=>i,r:()=>o,z5:()=>l});let l=["board_shop_tool_module","shop_tab_upsell","story_pins_search_upsell","structured_search_bubble","user_style_story_v2","search_story_separator","search_story_landing_page_header"],i="checklist_education_feed_card",n=["#CFFFCA","#D7EDFF","#DAD4FF","#DAFFF6","#FFE2EB","#FFE4C1","#FFFD92"],o={"#d7edff":"01","#002966":"01","#cfffca":"02","#ffe0e0":"04","#800000":"04","#dafff6":"06","#fffd92":"07","#c3f9c2":"07","#005f3e":"07","#ffe4c1":"08","#842000":"08","#ffe2eb":"09","#e9e4ff":"10","#400387":"10","#dad4ff":"10","#efefef":"11"}},88410:function(e,t,a){a.d(t,{Z:()=>e$});var l,i,n,o=a(647709),s=a(535701),r=a(969686),c=a(667294);a(167912);var d=a(616550),u=a(883119),h=a(779548),p=a(801082),_=a(525839),m=a(255957),g=a(886981),f=a(634737),y=a(169053),x=a(581722),v=a(761578),b=a(390843),S=a(369416),w=a(914061),T=a(274320),P=a(123998),j=a(351222),F=a(378888),k=a(341742),C=a(359829),E=a(144633),A=a(85363),D=a(611304),O=a(551651),I=a(762525);let Z=e=>({type:"SET_FLASHLIGHT_CROP_SOURCE",payload:{cropSource:e}});var L=a(80245),M=a(521009),R=a(503246),N=a(524884),H=a(816358),z=a(15667),B=a(32937),K=a(941404),G=a(572227),U=a(958742),W=a(785893);function V(e,t,a){var l;return(t="symbol"==typeof(l=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?l:l+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let $={baseStyles:{transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",transformOrigin:"bottom",touchAction:"none"}},Y={NONE:0,UP:1,DOWN:2};class Q extends c.Component{constructor(...e){super(...e),V(this,"state",{currentDistanceFromTop:this.props.maxDistanceFromTop?this.props.maxDistanceFromTop:-1,headerHeight:this.props.headerHeight||0,isAtTop:!1,scrollDirection:Y.NONE,shouldAnimate:!1,startY:0,canScrollOnChildren:!1}),V(this,"onTouchStart",e=>{let{clientY:t}=e.touches[0];this.setState({startY:t,shouldAnimate:!1,scrollDirection:Y.NONE})}),V(this,"onTouchMove",e=>{let{clientY:t}=e.touches[0],{startY:a,currentDistanceFromTop:l}=this.state,{canMoveModal:i,maxDistanceFromTop:n}=this.props,o=t-a;i&&void 0!==n&&(o>0&&l>=0&&l<n&&window.scrollY<=0||o<0&&l<=n&&l>=0)&&this.setModalPosition(t)}),V(this,"onTouchEnd",()=>{let{entryPoint:e,minDistanceFromTop:t,canMoveModal:a}=this.props;this.props.shouldSnapToEnds&&this.state.scrollDirection===Y.DOWN?(this.header&&H.Z.removeObstruction("top",this.header),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:this.props.maxDistanceFromTop,shouldAnimate:!0,isAtTop:!1}),e&&(0,K.My)(`mweb.${e}.snap_to_bottom`)):this.props.shouldSnapToEnds&&this.state.scrollDirection===Y.UP&&(this.state.isAtTop?this.setState({currentDistanceFromTop:0,shouldAnimate:!0}):this.setState({canScrollOnChildren:a,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),this.header&&H.Z.addObstruction("top",this.header),e&&(0,K.My)(`mweb.${e}.sliding_modal.snap_to_top`))}),V(this,"handleHandleMove",e=>{let{clientY:t}=e.touches[0],{canMoveModal:a,maxDistanceFromTop:l,minDistanceFromTop:i}=this.props,{startY:n,currentDistanceFromTop:o}=this.state;a&&o<=(i||0)&&t-n>0&&(e.stopPropagation(),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:l,isAtTop:!1,scrollDirection:Y.NONE,shouldAnimate:!0,startY:0}))}),V(this,"handleHeaderTouch",()=>{let{maxDistanceFromTop:e,minDistanceFromTop:t,entryPoint:a,canMoveModal:l}=this.props,{currentDistanceFromTop:i,scrollDirection:n}=this.state;n===Y.NONE&&(i===e?(this.setState({canScrollOnChildren:l,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),(0,K.My)(`mweb.${a}.sliding_modal.header_touch.snap_to_top`)):e&&(this.setState({canScrollOnChildren:!1,currentDistanceFromTop:e,shouldAnimate:!0,isAtTop:!1}),(0,K.My)(`mweb.${a}.sliding_modal.header_touch.snap_to_bottom`)))}),V(this,"handleCloseIconTouch",e=>{let{currentDistanceFromTop:t}=this.state,{onDismiss:a,logContextEvent:l,maxDistanceFromTop:i,viewParameter:n,viewType:o}=this.props;e.stopPropagation(),a&&(l({aux_data:{commerce_data:JSON.stringify({snapped_top:0===t})},element:75,event_type:102,view_parameter:n,view_type:o}),this.setState({currentDistanceFromTop:i,startY:0,scrollDirection:Y.NONE},()=>a(e)))}),V(this,"getModalStyles",()=>{let{shouldSnapToEnds:e}=this.props,{currentDistanceFromTop:t,shouldAnimate:a,canScrollOnChildren:l}=this.state,{baseStyles:i}=$;return{...i,animation:"modalReveal 0.3s ease-out both",position:l?"absolute":"fixed",top:t>-1?t:void 0,bottom:0,width:"100vw",...e&&a?{transitionDuration:"500ms",transitionProperty:"transform, opacity, top"}:Object.freeze({})}}),V(this,"setModalPosition",e=>{let{startY:t,currentDistanceFromTop:a}=this.state,{maxDistanceFromTop:l,snapToEndThreshold:i,entryPoint:n}=this.props;if(l){let o=e-t,s=Math.floor("CloseupShop"===n||"CloseUpMainPinDrawer"===n?Math.max(0,a+o):Math.min(l,Math.max(0,a+o))),r=Y.NONE;if(void 0!==i&&i>=0){let e=Math.floor(i*l),t=Math.floor((1-i)*l);o<0?r=s>t?Y.DOWN:Y.UP:o>0&&(r=s>e?Y.DOWN:Y.UP)}this.setState({startY:e,currentDistanceFromTop:s,scrollDirection:r})}})}componentDidMount(){let{isOpen:e}=this.props;e&&H.Z.pause()}componentDidUpdate(e,t){let{domainFilters:a,priceFilters:l,cropSource:i,isOpen:n,logContextEvent:o,maxDistanceFromTop:s,setHasDraggedDrawerToFullScreen:r,minDistanceFromTop:c,entryPoint:d}=this.props,{currentDistanceFromTop:u}=this.state;n&&!e.isOpen?H.Z.pause():!n&&e.isOpen&&H.Z.resume(),"CloseUpMainPinDrawer"===d&&s<e.maxDistanceFromTop&&u>s&&this.handleHeaderTouch(),t.currentDistanceFromTop!==(e.minDistanceFromTop||0)&&u===(c||0)&&r&&r(!0),a&&l&&(!(0,R.ZP)(a,e.domainFilters)||!(0,R.ZP)(l,e.priceFilters))&&o({event_type:13,view_parameter:"related_products"===(0,U.Z)(i)?3455:3456,view_type:72,element:11735})}componentWillUnmount(){let{isOpen:e}=this.props;this.header&&H.Z.removeObstruction("top",this.header),e&&H.Z.resume()}render(){let{children:e,headerChildren:t,heading:a,isAuth:l,isInHSObjLevelOneBarExp:i,isOpen:n,isRTL:o,mobileAccessibilityCloseIconLabel:s,mobileHideCloseIcon:r,noDivider:c,showHandle:d}=this.props,{headerHeight:h,canScrollOnChildren:p}=this.state,_=p||!l||i?"0":"32px 32px 0 0";return n?(0,W.jsx)(B.Z,{children:(0,W.jsx)(u.xu,{"aria-label":a,role:"dialog",children:(0,W.jsx)(u.xu,{color:"default",dangerouslySetInlineStyle:{__style:{...this.getModalStyles(),borderRadius:_}},"data-test-id":"sliding-modal-events-handler",onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,children:(0,W.jsxs)(u.iP,{accessibilityLabel:this.props.i18n._('View all search results', 'SlidingModal.Header.a11yLabel', 'Accessibility label for header of search results in flashlight'),onTap:this.handleHeaderTouch,children:[(0,W.jsxs)(u.Le,{top:h||0,children:[d&&(0,W.jsx)(u.xu,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"8px 0 24px 0",borderRadius:_}},"data-test-id":"slidingModalHandle",display:"flex",justifyContent:"center",onTouchMove:this.handleHandleMove,children:N.Z}),i&&(0,W.jsxs)(u.xu,{alignItems:"center",color:"default",display:this.state.isAtTop?"flex":"none",height:60,justifyContent:"center",opacity:+!!this.state.isAtTop,position:"relative",children:[(0,W.jsx)(u.xu,{alignItems:"center",display:"flex",left:!0,marginStart:2,padding:3,position:"absolute",children:(0,W.jsx)(u.JO,{accessibilityLabel:this.props.i18n._('Close sliding modal', 'slidingModal.hybridSearch.closeModal', 'Accessibility label for close icon on top of slider modal'),color:"default",icon:"arrow-down",size:"20"})}),(0,W.jsx)(u.kC,{alignItems:"stretch",flex:"grow",justifyContent:"center",children:(0,W.jsx)(u.xv,{size:"300",weight:"bold",children:this.props.i18n._('More like this', 'slidingModal.hybridSearch.moreLikeThis', 'top of slider modal to show similar pins with hybrid search')})})]}),!r&&(0,W.jsxs)(u.xu,{ref:e=>{this.header=e},color:"default",rounding:2,children:[(0,W.jsxs)(u.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,W.jsx)(u.kC,{alignItems:"center",justifyContent:"start",children:(0,W.jsx)(u.hU,{accessibilityLabel:s||"Close visual search results",dataTestId:"close-visual-search-results",icon:"arrow-back",iconColor:"gray",onClick:({event:e})=>this.handleCloseIconTouch(e),padding:5,size:"lg"})}),(0,W.jsx)(u.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:function({filterIconShown:e,isRTL:t}){let a=t?"marginRight":"marginLeft",l=t?"marginLeft":"marginRight";return e?{[a]:38,[l]:50,marginTop:15,marginBottom:15}:{[a]:-10,[l]:50,marginTop:15,marginBottom:15}}({isRTL:o})},"data-test-id":"slidingModalHeader",display:"flex",flex:"grow",justifyContent:"center",children:(0,W.jsx)(u.X6,{accessibilityLevel:2,align:"center",size:"400",children:a})})]}),t||null,!c&&(0,W.jsx)(u.iz,{})]})]}),(0,W.jsx)(u.xu,{overflow:p?"auto":"visible",children:e})]})})})}):null}}function q(e){let t=(0,_.ZP)(),a=(0,M.Z)(),{isRTL:l}=(0,z.B)(),i=(0,G.Z)(),{isAuth:n}=(0,s.Z)(),{checkExperiment:o}=(0,T.F)(),r=n&&o("web_search_hybrid_object_level_onebar",{dangerouslySkipActivation:!0}).anyEnabled;return(0,W.jsx)(Q,{...e,i18n:t,isAuth:n,isInHSObjLevelOneBarExp:r,isRTL:l,logContextEvent:a,trackInteraction:i})}var J=a(667835),X=a(588836);function ee({handleBackClick:e,viewParameter:t,viewType:a}){let{checkExperiment:l}=(0,T.F)(),i=(0,J.vs)(),{isAuth:n}=(0,s.Z)(),o=n&&l("web_search_hybrid_object_level_onebar",{dangerouslySkipActivation:!0}).anyEnabled;return(0,W.jsx)(u.xu,{"data-test-id":"cancelButton",left:!0,margin:2,position:"fixed",top:!0,children:(0,W.jsx)(X.Z,{bgColor:o?"white":"transparent",color:i||o?"darkGray":"white",disableRedirect:!0,icon:"cancel",isVisualSearch:!0,onTouch:e,padding:3,size:"lg",viewParameter:t,viewType:a})})}var et=a(93966),ea=a(751961),el=a(845421),ei=a(474147),en=a(425140),eo=a(980787),es=a(687400);function er(){let[e,t]=(0,c.useState)(0),[a,l]=(0,c.useState)(0),[i,n]=(0,c.useState)(!1),[o,s]=(0,c.useState)(!1),[r,d]=(0,c.useState)(void 0);function u(){s(!1),n(!1),d(void 0)}function h(e,t){"vertical"!==t&&e.stopPropagation()}return{onCarouselTouchStart:function(e){let{clientX:a,clientY:i}=e.touches[0];t(a),l(i),u()},onCarouselTouchMove:function(t){let{clientX:l,clientY:c}=t.touches[0],u=Math.abs(l-e);Math.abs(c-a)>10&&n(!0),u>10&&s(!0),o&&i?d(e=>e||"vertical"):o?d(e=>e||"horizontal"):i?d(e=>e||"vertical"):d(void 0),h(t,r)},onCarouselTouchEnd:function(e){h(e,r),u()}}}function ec({data:e,pinId:t,surfaceType:a,viewParameter:l,viewType:i}){let n=(0,_.ZP)(),{logContextEvent:o}=(0,eo.v)(),{width:s}=(0,v.Z)()||{},{onCarouselTouchStart:r,onCarouselTouchMove:c,onCarouselTouchEnd:d}=er(),h=(e?.results||[]).find(e=>"story"===e.type),{url:p=`/pin/${t}`,text:m=""}=h?.action||{},g=n._('Shop similar', 'mobileFlashlight.productUpsellTitle', 'Shop similar products from the image.');function f(){o({component:14339,element:179,event_type:102,view_parameter:l,view_type:i})}return h&&"stl"!==a?(0,W.jsxs)(u.xu,{marginBottom:-6,children:[(0,W.jsxs)(u.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginBottom:2,paddingX:4,children:[(0,W.jsx)(u.Tg,{href:p,onTap:({event:e})=>{e.stopPropagation(),f()},tapStyle:"compress",children:(0,W.jsx)(u.X6,{accessibilityLevel:2,size:"400",children:g})}),(0,W.jsx)(u.I_,{accessibilityLabel:m||n._('See more', 'headerModule.headerModuleActionButton.iconButton', 'An right arrow icon button to show more similar pins to the user in a new page'),bgColor:"transparent",dataTestId:"product-upsell-action-button",href:p,icon:"arrow-forward",iconColor:"darkGray",onClick:f,size:"sm"})]}),(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{touchAction:"pan-x",overflowY:"hidden"}},onTouchEnd:d,onTouchMove:c,onTouchStart:r,children:(0,W.jsx)(es.default,{component:14339,disableHeader:!0,story:h,storyKey:h?{type:"deprecated",data:h}:null,surface:"ShoppingDynamicHeightGrid",view:i,viewParameter:l,width:s})})]}):null}var ed=a(780879),eu=a(949044),eh=a(974705),ep=a(288910),e_=a(32228);function em({auxData:e}){let{onCarouselTouchStart:t,onCarouselTouchMove:a,onCarouselTouchEnd:l}=er(),i=e?.metadata?.one_bar_modules,n=(0,eu.Z)(eh.Z,!0)(i);return n&&n.length>0?(0,W.jsx)(ep.v,{children:(0,W.jsx)(ed.f,{children:(0,W.jsx)(u.xu,{marginBottom:4,onTouchEnd:l,onTouchMove:a,onTouchStart:t,paddingX:2,children:(0,W.jsx)(u.iP,{onTap:({event:e})=>e.stopPropagation(),children:(0,W.jsx)(e_.Z,{oneBarModules:n})})})})}):null}function eg({auxData:e,isShopTheLookFeed:t,pinId:a,searchResourceOptions:l,surfaceType:i,viewParameter:n,viewType:o}){let s=(0,_.ZP)(),{auxData:r,data:d,fetchMore:h,isAtEnd:p,isFetching:m,isLoaded:f}=(0,g.Z)({name:"VisualSearchFlashlightUnifiedResource",options:l}),y=(d?.results||[]).flatMap(e=>"pin"===e.type?e:[]),x=s._('Image search', 'mobileFlashlight.organicFeedTitle', 'Search results from the image.'),v=s._('Shop the look', 'mobileFlashlight.shopTheLookFeedTitle', 'Shop the look for similar products from the cropped image.');return f?(0,W.jsxs)(c.Fragment,{children:[(0,W.jsx)(em,{auxData:r}),(0,W.jsx)(ec,{data:d,pinId:a,surfaceType:i,viewParameter:n,viewType:o}),(0,W.jsx)(u.xu,{marginBottom:3,paddingX:4,children:(0,W.jsx)(u.X6,{accessibilityLevel:2,size:"400",children:t?v:x})}),(0,W.jsx)(u.xu,{color:"default",dangerouslySetInlineStyle:{__style:{touchAction:"pan-y"}},paddingX:et.D6,children:(0,W.jsx)(en.Z,{feedItems:y,feedKey:(0,ei.J)("VisualSearchFlashlightUnifiedResource",l)??"",pagination:{loadNext:h||(()=>void 0),hasNext:!p,isLoadingNext:m||!1,refetch:()=>void 0},renderFeedItem:(a,l)=>(0,W.jsx)(ea.Z,{children:(0,W.jsx)(el.ZP,{auxData:e,componentType:0,duploQueryRef:null,pinId:a.id??"",slotIndex:l,trackingParams:a.tracking_params||void 0,trafficSource:t?"shop_feed":void 0,viewParameter:n,viewType:o})})})})]}):(0,W.jsx)(u.xH,{accessibilityLabel:s._('Loading visual search results', 'mobileFlashlightPage.loadingSpinner', 'Spinner for loading the visual search result'),show:!0})}function ef({isShopTheLookFeed:e,searchResourceOptions:t,viewParameter:a,viewType:l}){let{data:i,fetchMore:n,isAtEnd:o,isFetching:s}=(0,g.Z)(e?{name:"VisualSearchFlashlightUnifiedResource",options:t}:{name:"VisualLiveSearchResource",options:t});return(0,W.jsx)(u.xu,{color:"default",paddingX:et.D6,children:(0,W.jsx)(en.Z,{feedItems:i?.results??[],feedKey:(0,ei.J)("VisualLiveSearchResource",t)??"",pagination:{loadNext:n||(()=>void 0),hasNext:!o,isLoadingNext:s||!1,refetch:()=>void 0},renderFeedItem:(e,t)=>(0,W.jsx)(ea.Z,{children:(0,W.jsx)(el.ZP,{componentType:0,duploQueryRef:null,pinId:e.id??"",slotIndex:t,trackingParams:e.tracking_params,trafficSource:"flashlight",viewParameter:a,viewType:l})})})})}var ey=a(326113);function ex(){return Math.min(ey.g6,window.innerWidth)}function ev(e,t){return Math.floor(ex()/t*e)}var eb=a(244074),eS=a(976892),ew=a(47239),eT=a(615440),eP=a(743222),ej=a(903098);function eF({pinDominantColor:e,url:t,closeupImageWidth:a,closeupImageHeight:l}){let i=(0,_.ZP)();return(0,W.jsx)(ej.Z,{alt:i._('Pin image', 'flashlight.cropper.closeupImage', 'Pin closeup image'),color:e,isFlashlightPage:!0,naturalHeight:l,naturalWidth:a,placeholder:t,showSpinner:!1,src:t})}let ek=e=>{let{alt:t,src:a,top:l,left:i}=e;return(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{top:l,left:i}},height:24,position:"absolute",width:24,children:(0,W.jsx)(u.Ee,{alt:t,color:"transparent",naturalHeight:24,naturalWidth:24,src:a})})},eC={backgroundColor:"#000000",opacity:"0.4"};function eE({closeupImageUrl:e,closeupImageDims:t,cropArea:{x:a,y:l,w:i,h:n},disableBorder:o,disableHandles:s,handleBackClick:r,onTouchEnd:c,onTouchMove:d,onTouchStart:h,pinDominantColor:p,showBackButton:m,viewParameter:g}){let f=(0,_.ZP)(),{closeupImageWidth:y,closeupImageHeight:x}=t,v=Math.floor(x*l),b=Math.floor(y*a),S=Math.floor(x*n),w=Math.floor(y*i),T=b+w,P=v+S;return(0,W.jsxs)(u.xu,{"data-test-id":"cropper-container",onTouchEnd:c,onTouchMove:d,onTouchStart:h,position:"relative",children:[(0,W.jsx)(eF,{closeupImageHeight:x,closeupImageWidth:y,pinDominantColor:p,url:e??""}),(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:eC},height:v,left:!0,position:"absolute",top:!0,width:"100%"}),(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{...eC,top:v}},height:S,left:!0,position:"absolute",width:b}),(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{...eC,top:v,left:T}},height:S,position:"absolute",right:!0}),(0,W.jsx)(u.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...eC,top:P}},left:!0,position:"absolute",width:"100%"}),m&&(0,W.jsx)(ee,{handleBackClick:r,viewParameter:g,viewType:427}),!s&&(0,W.jsxs)(u.xu,{"data-test-id":"CropperHandles",children:[(0,W.jsx)(ek,{alt:f._('Top left cropper handle', 'flashlight.cropper.topLeftHandle', 'top left handle for cropping image'),left:b-9,src:eT,top:v-9}),(0,W.jsx)(ek,{alt:f._('Top right cropper handle', 'flashlight.cropper.topRightHandle', 'top right handle for cropping image'),left:T-15,src:eP,top:v-9}),(0,W.jsx)(ek,{alt:f._('Bottom left cropper handle', 'flashlight.cropper.bottomLeftHandle', 'bottom left handle for cropping image'),left:b-9,src:eS,top:P-15}),(0,W.jsx)(ek,{alt:f._('Bottom right cropper handle', 'flashlight.Cropper.BottomLeftHandle', 'bottom right handle for cropping image'),left:T-15,src:ew,top:P-15})]}),(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{top:v-2,left:b-2,border:o?void 0:"2px solid #ffffff"}},"data-test-id":"CroppedArea",height:S+4,position:"absolute",rounding:2,width:w+4})]})}var eA=a(556872);function eD({auxData:e,onClick:t,shouldLogDotRender:a,showNoHalo:l,style:i,viewParameter:n,x:o,y:s}){let r=(0,_.ZP)(),c=(0,M.Z)();return(0,k.Z)(()=>{a&&c({aux_data:e,element:1221,event_type:120,view_parameter:n,view_type:72})}),(0,W.jsx)("div",{"aria-label":r._('Select a specific item on image', 'dot.accessibilityLabel', 'Accessibility label for <Dot /> component'),"data-test-id":"dot",onClick:t,onKeyPress:t,role:"button",style:{position:"absolute",top:s-16,left:o-16,outline:"none",...i},tabIndex:0,children:(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:l?void 0:"rgba(0, 0, 0, 0.1)",width:32,height:32,border:"none",borderRadius:32,cursor:t?"pointer":"default"}},children:(0,W.jsx)(u.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{boxShadow:"none",width:16,height:16,border:"none",borderRadius:16,top:8,left:8}},display:"flex",justifyContent:"center",padding:0,position:"absolute"})})})}var eO=a(450808);let eI="flashlightDotPop",eZ=(0,eO.Ll)([`
  ${eI} {
      0% {
          opacity: 0;
          transform: scale(0);
      }

      100% {
          opacity: 1;
          transform: scale(1);
      }
  }
`,`labelReveal {
    0% {
      transform: scale(0, 1)
    }

    100% {
      transform: scale(1, 1)
    }
  }
`]),eL=e=>{let t=parseFloat((.1*e).toFixed(2));return{animation:`${eI} 0.3s ease-out ${t}s both`}};function eM({closeupImageTop:e,imageHeight:t,imageTop:a,imageWidth:l,onDotTap:i,pinId:n,pinImageSignature:o,setCropArea:s,shouldLogDotRender:r,showNoHalo:d,viewParameter:u,visualObjects:h,visualObjectToHide:p}){let _=(0,M.Z)();return(0,W.jsxs)(c.Fragment,{children:[(0,W.jsx)(S.Z,{unsafeCSS:eZ}),h.map((c,m)=>{if(m===p)return null;let{x:g=0,y:f=0,w:y=0,h:x=0}=c,v={x:g,y:f,h:x,w:y},b=(0,eA.Z)({cropArea:{x:g,y:f,w:y,h:x},scaledWidth:l,scaledHeight:t}),S=Math.floor(b.x+b.w/2),w=Math.floor(b.y+a+b.h/2),T=eL(m),P={pin_id:n,image_signature:o,visual_objects:JSON.stringify([v]),commerce_data:JSON.stringify({entrypoint:"flashlight",pin_is_stela:"false"})};return(0,W.jsx)(eD,{auxData:P,onClick:function(){_({aux_data:P,element:1221,event_type:102,view_parameter:u,view_type:72}),i({cropArea:v,cropSource:4,visualObjects:h}),s?.(v)},shouldLogDotRender:r,showNoHalo:d,style:T,viewParameter:u,x:S,y:w-e},JSON.stringify(v))})]})}let eR={OUTSIDE:0,INSIDE:1,LEFT_CROPPER:2,RIGHT_CROPPER:3,TOP_CROPPER:4,BOTTOM_CROPPER:5,TOP_LEFT_HANDLE:6,TOP_RIGHT_HANDLE:7,BOTTOM_LEFT_HANDLE:8,BOTTOM_RIGHT_HANDLE:9,NONE:10};function eN({closeupImageUrl:e,closeupImageDims:t,cropArea:a,handleBackClick:l,handleChangeCloseupImageTop:i,handleCropperChange:n,headerHeight:o,pinDominantColor:r,pinId:d,pinImageSignature:h,showBackButton:p,viewParameter:_,visualObjects:m,visualObjectToHide:g}){let f=(0,M.Z)(),{isAuth:y}=(0,s.Z)(),x=(0,c.useRef)(null),[v,b]=(0,c.useState)(0),[S,w]=(0,c.useState)(0),[T,P]=(0,c.useState)(eR.NONE),[j,F]=(0,c.useState)(a),{current:k}=(0,eb.Z)(),{x:C,y:E,w:A,h:D}=j,{closeupImageTop:O,closeupImageMinTop:I,closeupImageWidth:Z,closeupImageHeight:L,minCropperWidthRatio:R,minCropperHeightRatio:N}=t,H=o||0,z=(e,t)=>{let a=t-O,l=e-(x.current?x.current.getBoundingClientRect().left:0),i=L*E,n=L*(E+D),o=Z*C,s=Z*(A+C);if(a>i+12&&a<n-12&&l>o+12&&l<s-12)return eR.INSIDE;if(l<=o+12&&l>=o-12&&a>=i+15&&a<=n-15)return eR.LEFT_CROPPER;if(l<=s+12&&l>=s-12&&a>=i+15&&a<=n-15)return eR.RIGHT_CROPPER;if(l<=s-15&&l>=o+15&&a>=i-12&&a<=i+12)return eR.TOP_CROPPER;if(l<=s-15&&l>=o+15&&a>=n-12&&a<=n+12)return eR.BOTTOM_CROPPER;if(l<=o-9+24&&l>=o-12&&a>=i-12&&a<=i+24-9)return eR.TOP_LEFT_HANDLE;if(l<=s+12&&l>=s-15&&a>=i-12&&a<=i+24-9)return eR.TOP_RIGHT_HANDLE;else if(l<=o-9+24&&l>=o-12&&a>=n-15&&a<=n+12)return eR.BOTTOM_LEFT_HANDLE;else if(l<=s+12&&l>=s-15&&a>=n-15&&a<=n+12)return eR.BOTTOM_RIGHT_HANDLE;else return eR.OUTSIDE};return(0,W.jsx)(u.kC,{justifyContent:"center",width:"100vw",children:(0,W.jsxs)(u.xu,{ref:x,dangerouslySetInlineStyle:{__style:{top:O,touchAction:"none"}},maxWidth:ey.g6,overflow:"hidden",position:"fixed",width:"100%",children:[(0,W.jsx)(eE,{closeupImageDims:t,closeupImageUrl:e,cropArea:j,handleBackClick:l,onTouchEnd:()=>{[eR.NONE,eR.OUTSIDE].includes(T)||(f({event_type:T===eR.INSIDE?7603:7604,view_parameter:_,view_type:72}),n({cropArea:j,cropSource:6,visualObjects:m}))},onTouchMove:e=>{let{clientX:t,clientY:a}=e.touches[0];if(b(t),w(a),T===eR.NONE&&P(z(t,a)),null!=R&&null!=N&&null!=I){let e=a-S,l=(t-v)/Z,n=e/L,o=Math.min(C+A-R,Math.max(0,C+l)),s=A+(C-o),r=Math.min(E+D-N,Math.max(0,E+n)),c=D+(E-r),d=Math.min(1-C,Math.max(R,A+l)),u=Math.min(1-E,Math.max(N,D+n));switch(T){case eR.OUTSIDE:i(Math.floor(Math.max(I,Math.min(H,O+e))));break;case eR.INSIDE:F(e=>({...e,x:Math.max(0,Math.min(1-A,C+l)),y:Math.max(0,Math.min(1-D,E+n))}));break;case eR.LEFT_CROPPER:F(e=>({...e,x:o,w:s}));break;case eR.RIGHT_CROPPER:F(e=>({...e,w:d}));break;case eR.TOP_CROPPER:F(e=>({...e,y:r,h:c}));break;case eR.BOTTOM_CROPPER:F(e=>({...e,h:u}));break;case eR.TOP_LEFT_HANDLE:F({x:o,w:s,y:r,h:c});break;case eR.TOP_RIGHT_HANDLE:F(e=>({...e,w:d,y:r,h:c}));break;case eR.BOTTOM_LEFT_HANDLE:F(e=>({...e,h:u,x:o,w:s}));break;case eR.BOTTOM_RIGHT_HANDLE:F(e=>({...e,h:u,w:d}))}}},onTouchStart:e=>{let{clientX:t,clientY:a}=e.touches[0];b(t),w(a),P(eR.NONE)},pinDominantColor:r,showBackButton:p,viewParameter:_}),!!m.length&&0!==L&&0!==Z&&(0,W.jsx)(u.xu,{"data-test-id":"FlashlightDots",children:(0,W.jsx)(eM,{closeupImageTop:O,imageHeight:L,imageTop:O,imageWidth:Z,onDotTap:n,pinId:d,pinImageSignature:h,setCropArea:F,shouldLogDotRender:!k,showNoHalo:y,viewParameter:_,visualObjects:m,visualObjectToHide:g})})]})})}let eH=`
  html, body {
    overscroll-behavior: none;
  }
`,ez=void 0!==l?l:l=a(272636);function eB({pinKey:e}){let t=(0,_.ZP)(),a=(0,x.I0)(),l=(0,d.k6)(),{previous:i}=(0,b.Hv)(),n=(0,d.TH)(),{isAuth:r}=(0,s.Z)(),{width:p}=(0,v.Z)()||{},m=(0,o.ZP)(),g=(0,h.Z)(ez,e),{checkExperiment:f}=(0,T.F)(),y=r&&f("web_search_hybrid_object_level_onebar",{dangerouslySkipActivation:!0}).anyEnabled,M=(0,F.mB)(n.search),{cropSource:R,filters:N,hybrid_search_param:H,journey_depth:z,search_query:B,source_module_id:K,x:G,y:U,h:V,w:$,surfaceType:Y,requestParams:Q}=M,J=Y||"flashlight",X=!r&&(0,j.x9)(m)||void 0,[et,ea]=(0,c.useState)(()=>{var e,t,a;let l,i,n=function({headerHeight:e,pinImageHeight:t,pinImageWidth:a}){let l=0,i=0,n=0;return t&&a&&(l=ex(),i=ev(t,a),n=Math.min(Math.floor(.6*window.innerHeight),ev(t,a))),{closeupImageWidth:l,closeupImageHeight:i,closeupImageMinTop:n-i,closeupImageTop:e||0,minCropperWidthRatio:l?50/l:0,minCropperHeightRatio:i?50/i:0,modalTop:n}}({headerHeight:X,pinImageHeight:g.imageSpec_736x?.height,pinImageWidth:g.imageSpec_736x?.width}),{closeupImageHeight:o,modalTop:s}=n,r=(e=Number(V),t=Number(U),a=X||0,l=e?Number(e):.4,i=t?Number(t):.1,o>0&&s>0&&(e||(l=(s-2*s*.1-a)/o),t||(i=.1*s/o)),{h:l,y:i});return{closeupImageDims:n,x:G?Number(G):.1,w:$?Number($):.8,y:r.y,h:r.h}}),[el,ei]=(0,c.useState)(()=>(0,E.Z)(Number(R))||(G&&U&&V&&$?6:5)),en={x:et.x,y:et.y,w:et.w,h:et.h},eo="stl"===J&&4===el,es=function({cropSource:e,surfaceType:t,isProductPage:a,queryEntrypoint:l}){return l||("stl"===t&&4===e?"shop_the_look_module":a?"feed_module":null)}({cropSource:el,isProductPage:!1,surfaceType:J,queryEntrypoint:M.entrypoint}),er={pin_id:g?.entityId,crop:en,crop_source:el,is_shopping:eo,entry_source:eo?"shopping":"flashlight",entrypoint:es,filters:N,hybrid_search_param:H,journey_depth:parseInt(z,10)||void 0,search_query:B,source_module_id:K},ec=(g.visualObjects??[]).filter(e=>e.isStela).map(D.Z),[ed,eu]=(0,c.useState)((0,C.Z)(ec,en)),{isCropAreaOnDotArea:eh,indexToHide:ep}=ed,{closeupImageWidth:e_,modalTop:em}=et.closeupImageDims,ey=g?.imageSpec_736x?.url??"",eb=!p||p-60<e_&&r,eS=!eb&&r,ew=r?60*!y:X,eT=t._('Visual search', 'Visual search results', 'Visual search results'),{auxData:eP,viewType:ej,viewParameter:eF}=function({cropSource:e,isAuth:t,isCropAreaOnDotArea:a,isProductPage:l,surfaceType:i}){let n=t||"stl"===i,o=4===e||a,s=l?"product":"stl"===i?o?"product":"organic":t&&o?"unified":"organic";return{auxData:(()=>{let e=e=>({commerce_data:JSON.stringify({is_product_only_feed:e})});return"product"===s?e(!0):"unified"===s||n?e(!1):void 0})(),viewType:"product"===s?427:72,viewParameter:"organic"===s?3050:3462}}({cropSource:el,isAuth:r,isCropAreaOnDotArea:eh,isProductPage:!1,surfaceType:J}),ek=e=>a((0,L.By)(e)),eC=e=>a(Z(e));function eE(){if(0===i.length)return void l.replace(`/pin/${g.entityId}/`);l.goBack()}return((0,k.Z)(()=>{eC(el)}),0===em)?null:(0,W.jsxs)(c.Fragment,{children:[(0,W.jsx)(S.Z,{unsafeCSS:eH}),(0,W.jsx)(O.Z,{auxData:eP,viewParameter:eF,viewType:ej,children:(0,W.jsx)(P.Z,{view:ej,children:(0,W.jsxs)(w.default,{hasFixedHeader:!0,hasGutter:!1,children:[(0,W.jsx)(I.Z,{text:t._('Visual Search Page', 'flashlight.accessibilityhiddenheading.fullpage', 'accessibility label for flashlight page')}),(0,W.jsx)(u.xu,{color:"dark",height:"100vh",width:"100vw"}),(0,W.jsx)(eN,{closeupImageDims:et.closeupImageDims,closeupImageUrl:ey,cropArea:en,handleBackClick:eE,handleChangeCloseupImageTop:function(e){ea(t=>({...t,closeupImageDims:{...t.closeupImageDims,closeupImageTop:e}}))},handleCropperChange:function({cropArea:e,cropSource:t,visualObjects:a}){eC(t),ek(g.entityId),eu((0,C.Z)(a,e)),ei(t),ea(t=>({...t,...e})),l.replace((0,A.Z)({cropArea:e,cropSource:t,isProductPage:!1,pinId:g.entityId,requestParams:Q,surfaceType:J}))},headerHeight:X,pinDominantColor:g.dominantColor||"#efefef",pinId:g.entityId,pinImageSignature:g.imageSignature,showBackButton:eb,viewParameter:eF,visualObjects:ec,visualObjectToHide:ep}),eS&&(0,W.jsx)(ee,{handleBackClick:eE,viewParameter:eF,viewType:ej}),(0,W.jsx)(q,{canMoveModal:!0,cropSource:el,entryPoint:"flashlight",headerHeight:X,heading:eT,isOpen:!0,location:n,maxDistanceFromTop:em||0,minDistanceFromTop:ew,mobileAccessibilityCloseIconLabel:t._('Close visual search results', 'close visual search results and go back to pin', 'close visual search results and go back to pin'),mobileHideCloseIcon:r,noBorder:!0,noDivider:!0,noMaskOnBackground:!0,onDismiss:eE,pinId:g.entityId,shouldSnapToEnds:!0,showHandle:r,snapToEndThreshold:.3,viewParameter:eF,viewType:ej,children:r?(0,W.jsx)(eg,{auxData:eP,isShopTheLookFeed:eo,pinId:g.entityId,searchResourceOptions:er,surfaceType:J,viewParameter:eF,viewType:ej}):(0,W.jsx)(ef,{isShopTheLookFeed:eo,searchResourceOptions:er,viewParameter:eF,viewType:ej})})]})})})]})}let eK=void 0!==i?i:i=a(807352),eG=void 0!==n?n:n=a(345463);function eU(){let e=(0,d.$B)(),{pinId:t}=(0,f.Z)(e.params.id||""),a=(0,p.Z)({strategy:"LEGACY",query:eG,variables:{pinId:t},useGetLegacyData:({pinId:e})=>{let{data:t}=(0,g.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),a=(0,y.S6)()(e);return t??a}}),l=a?.v3GetPinQuery?.__typename==="V3GetPin"?a.v3GetPinQuery.data:null,i=(0,h.Z)(eK,l);return i?(0,W.jsx)(eB,{pinKey:i}):null}function eW(){let e=(0,_.ZP)();return(0,W.jsx)(m.Z,{measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,W.jsx)(c.Suspense,{fallback:(0,W.jsx)(u.xH,{accessibilityLabel:e._('Loading Pin data', 'mobileFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0}),children:(0,W.jsx)(eU,{})})})}var eV=a(290003);let e$=function(){let e=(0,o.HG)(),t=(0,s.Z)();return e?t.isAuth?(0,W.jsx)(r.Z,{}):(0,W.jsx)(eV.Z,{}):(0,W.jsx)(eW,{})}},987563:function(e,t,a){a.d(t,{Z:()=>l});let l=(0,a(667294).createContext)(void 0)},756334:function(e,t,a){a.d(t,{Z:()=>n});var l=a(667294),i=a(987563);function n({children:e,metricName:t}){return(0,l.useContext)(i.Z),e}},113481:function(e,t,a){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||[]).push(["www/pin/[id]/visual-search",function(){return a(88410).Z}])},976892:function(e){e.exports="https://s.pinimg.com/webapp/handle_bottom_left-d4d98c77.svg"},47239:function(e){e.exports="https://s.pinimg.com/webapp/handle_bottom_right-ccae4564.svg"},615440:function(e){e.exports="https://s.pinimg.com/webapp/handle_top_left-68937c82.svg"},743222:function(e){e.exports="https://s.pinimg.com/webapp/handle_top_right-4d7ae997.svg"}},function(e){e.O(0,["22171","25418","25705","32959","33720","35024","35502","38457","39176","39811","46401","48245","49453","63218","64332","65704","71735","76891","77241","79226","84476","84539","87707","91757","9748","98695","99638"],function(){return e(e.s=113481)}),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/visual-search-2f3afdb287d9a698.mjs.map