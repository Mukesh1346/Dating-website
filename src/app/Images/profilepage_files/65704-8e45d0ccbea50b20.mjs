(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["65704"],{17314:function(e,a,l){l.d(a,{Z:()=>d});var n,i,t=l(813653),r=l(831423),s=0,o=0;let d=function(e,a,l){var d=a&&l||0,u=a||Array(16),c=(e=e||{}).node||n,g=void 0!==e.clockseq?e.clockseq:i;if(null==c||null==g){var m=e.random||(e.rng||t.Z)();null==c&&(c=n=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==g&&(g=i=(m[6]<<8|m[7])&16383)}var p=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:o+1,y=p-s+(h-o)/1e4;if(y<0&&void 0===e.clockseq&&(g=g+1&16383),(y<0||p>s)&&void 0===e.nsecs&&(h=0),h>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");s=p,o=h,i=g;var f=((0xfffffff&(p+=122192928e5))*1e4+h)%0x100000000;u[d++]=f>>>24&255,u[d++]=f>>>16&255,u[d++]=f>>>8&255,u[d++]=255&f;var _=p/0x100000000*1e4&0xfffffff;u[d++]=_>>>8&255,u[d++]=255&_,u[d++]=_>>>24&15|16,u[d++]=_>>>16&255,u[d++]=g>>>8|128,u[d++]=255&g;for(var k=0;k<6;++k)u[d+k]=c[k];return a||(0,r.Z)(u)}},135885:function(e,a,l){var n;l.r(a),l.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardAttribution_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="610a35d46510240eb58e262c1909310c";let t=i},5375:function(e,a,l){var n,i,t;l.r(a),l.d(a,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardBody_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[t={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{args:null,kind:"FragmentSpread",name:"RecipeMetadata_recipe"}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null},n,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},t,{args:null,kind:"FragmentSpread",name:"usePinImageUrls_pin"},{args:null,kind:"FragmentSpread",name:"useNormalizePinData_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardAttribution_pin"}],type:"Pin",abstractKey:null};r.hash="81db65fd15680cc0281b801ed4a8cb94";let s=r},625957:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightSpotlightDots_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};n.hash="3a8409077905af94eb39568e4a5a57fc";let i=n},212480:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"OneBar_oneBarModules",selections:[{alias:"entityId",args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"OneBarModule_oneBarModules"}],type:"OneBarModule",abstractKey:null};n.hash="45cea1099e24f55ebce4abebdb411447";let i=n},815025:function(e,a,l){var n;l.r(a),l.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RecipeMetadata_recipe",selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:n,storageKey:null}],storageKey:null}],type:"RecipeMetadata",abstractKey:null};i.hash="12f77507a9fdec344b44b7e659fa5ac1";let t=i},984110:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsImageContent_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchCropper_pin"}],type:"Pin",abstractKey:null};n.hash="cf91489ba983999faaad373f85110c29";let i=n},55575:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n=(t=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],r=[{kind:"Variable",name:"pin",variableName:"pinId"}],s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o=[{kind:"Literal",name:"spec",value:"564x"}],g=[d={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],m=[{kind:"Literal",name:"spec",value:"736x"}],p=[{kind:"Literal",name:"spec",value:"474x"}],f={alias:"image236x",args:h=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:y=[s],storageKey:'additionalImagesPerSpec(spec:"236x")'},_={alias:"image474x",args:p,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:y,storageKey:'additionalImagesPerSpec(spec:"474x")'},k={alias:"image564x",args:o,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:y,storageKey:'additionalImagesPerSpec(spec:"564x")'},x={alias:"image736x",args:m,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:y,storageKey:'additionalImagesPerSpec(spec:"736x")'},{fragment:{argumentDefinitions:t,kind:"Fragment",metadata:null,name:"RelatedProductsPageQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[s,{args:null,kind:"FragmentSpread",name:"RelatedProductsPage_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"RelatedProductsPageQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:"imageSpec_564x",args:o,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:g,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:m,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:g,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[d,u,c,s],storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:p,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:g,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:h,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:g,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:y,storageKey:null}],storageKey:null},f,_,k,x],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null},f,_,k,x],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:y,storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductMetadataV2",kind:"LinkedField",name:"productPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"ItemMetadata",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"additionalImagesLength",storageKey:null}],storageKey:null},S],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},S],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[s,S],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},S],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"c4a62025e656e54f27dad3385a78b7d4dc1f9d5ddeb3eb7c5b511fce63c11d9f",metadata:{},name:"RelatedProductsPageQuery",operationKind:"query",text:null}});n.hash="0f7b98a1f02dbf8528df0452aa26efd4";let i=n;var t,r,s,o,d,u,c,g,m,p,h,y,f,_,k,x,S,v=n.default||n;if("query"===v.params.operationKind)if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(v);else{let e=[v.params.name,v.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[e]=v}},376985:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsPage_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchPageWithPinData_pin"}],type:"Pin",abstractKey:null};n.hash="91d05676e413b7b47653c2f8fa609093";let i=n},758809:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsUnifiedFeed_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchMasonryGrid_pin"}],type:"Pin",abstractKey:null};n.hash="20c2c7f4ff982fb93a9608faa14f3ed2";let i=n},582328:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StelaCutouts_pin",selections:[{args:null,kind:"FragmentSpread",name:"StelaCutout_pin"},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};n.hash="2d79886cca650301394af9cbacdeede4";let i=n},584411:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthCropperContainer_pin",selections:[{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightSpotlightDots_pin"}],type:"Pin",abstractKey:null};n.hash="939d46d8644385a7918ed8179ce77a4c";let i=n},165135:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n=(t=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],r=[{kind:"Variable",name:"pin",variableName:"pinId"}],s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},u=[{kind:"Literal",name:"spec",value:"564x"}],p=[{kind:"Literal",name:"spec",value:"736x"}],h=[m={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],y=[{kind:"Literal",name:"spec",value:"474x"}],f=[{kind:"Literal",name:"spec",value:"236x"}],_={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},x=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],v={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:S=[s],storageKey:null},w={alias:"image236x",args:f,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S,storageKey:'additionalImagesPerSpec(spec:"236x")'},F={alias:"image474x",args:y,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S,storageKey:'additionalImagesPerSpec(spec:"474x")'},b={alias:"image564x",args:u,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S,storageKey:'additionalImagesPerSpec(spec:"564x")'},P={alias:"image736x",args:p,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S,storageKey:'additionalImagesPerSpec(spec:"736x")'},K={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},C=[g],{fragment:{argumentDefinitions:t,kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UnauthDesktopFlashlightPageFetchData_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},o,{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},d],storageKey:null},{alias:"imageSpec_564x",args:u,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[c,g,m],storageKey:'images(spec:"564x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[c,g,m,s],storageKey:'images(spec:"orig")'},{alias:"imageSpec_736x",args:p,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:h,storageKey:'images(spec:"736x")'},{alias:"imageSpec_474x",args:y,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:h,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:f,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:h,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},o,d,{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[_,{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[k,{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[_,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:x,storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:x,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[s,_,v,{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[_,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:S,storageKey:null}],storageKey:null},w,F,b,P],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[_,v,{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null},w,F,b,P],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[K,T,j],storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},j,s],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},L,{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},k,{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:C,storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:C,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:C,storageKey:'images(spec:"170x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:C,storageKey:'images(spec:"600x315")'},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[L,_,{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},g,j],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[L,T,{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},K,j],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:S,storageKey:null},j],storageKey:null},{alias:null,args:null,concreteType:"ProductMetadataV2",kind:"LinkedField",name:"productPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"ItemMetadata",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"additionalImagesLength",storageKey:null}],storageKey:null},j],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},j],storageKey:null},j],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"4f98fda893ba1980532b9905b28f196e419e75b106a6485f5f63653917b888e1",metadata:{},name:"UnauthDesktopFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});n.hash="c1c702b23a1454b46f8e2fa9d8036257";let i=n;var t,r,s,o,d,u,c,g,m,p,h,y,f,_,k,x,S,v,w,F,b,P,K,T,j,L,C,I=n.default||n;if("query"===I.params.operationKind)if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(I);else{let e=[I.params.name,I.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[e]=I}},514336:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchData_pin",selections:[{args:null,kind:"FragmentSpread",name:"UnauthDesktopFlashlightPage_pin"}],type:"Pin",abstractKey:null};n.hash="01839fc3bcd9cdaf206873364167d157";let i=n},579652:function(e,a,l){var n;l.r(a),l.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"orig")'},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardBody_pin"},{args:null,kind:"FragmentSpread",name:"UnauthCropperContainer_pin"}],type:"Pin",abstractKey:null};i.hash="93612431e09eadc717c32d98e8d91e06";let t=i},829187:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"useGetViewLog_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsImageContent_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"}],type:"Pin",abstractKey:null};n.hash="78ca00dffe2e5009ee41df9c253d916a";let i=n},934209:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchCropper_pin",selections:[{args:null,kind:"FragmentSpread",name:"useSamSegmentation_pin"},{args:null,kind:"FragmentSpread",name:"StelaCutouts_pin"}],type:"Pin",abstractKey:null};n.hash="dada23a14d0fcddf95de8176ed25f41f";let i=n},553593:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchPageWithPinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};n.hash="998c32da4dfbd09ab564137cf5290360";let i=n},85740:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetViewLog_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};n.hash="b524bc1e068664edfb117ac744cb044f";let i=n},799956:function(e,a,l){var n;l.r(a),l.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useNormalizePinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:n=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:n,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null};i.hash="01a93671cde480baa2cfd8b781589acd";let t=i},160187:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useSamSegmentation_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};n.hash="50c726067ab8af873ed4afded90b7bed";let i=n},318812:function(e,a,l){l.d(a,{Fy:()=>t,ZP:()=>r,_G:()=>i});var n=l(375584);let i=e=>n.Fd[e]??n.U5.MORE_IDEAS,t=e=>n.lJ[e]??0,r="/collage-creation-tool"},375584:function(e,a,l){l.d(a,{Fd:()=>p,Gb:()=>x,Nc:()=>s,Sf:()=>r,U5:()=>m,V5:()=>k,Xu:()=>t,_4:()=>_,b6:()=>f,bP:()=>u,fw:()=>g,hb:()=>y,jz:()=>c,lJ:()=>h,m2:()=>i,pI:()=>d,qb:()=>o,yW:()=>n});let n=170,i=4,t=5,r=48,s=232,o=539,d=9/16,u=236,c=94,g=4,m={MORE_IDEAS:"MORE_IDEAS",DRAFTS:"DRAFTS",SEARCH:"SEARCH",YOUR_BOARDS:"YOUR_BOARDS"},p={0:"MORE_IDEAS",1:"YOUR_BOARDS",2:"DRAFTS",3:"SEARCH"},h={MORE_IDEAS:0,YOUR_BOARDS:1,DRAFTS:2,SEARCH:3},y=420,f=280,_="#ffffff",k=5e3,x={PIN:1,TEXT:2,IMAGE:3}},742235:function(e,a,l){l.r(a),l.d(a,{default:()=>k});var n,i=l(667294),t=l(167912),r=l(616550),s=l(883119),o=l(618140),d=l(879921),u=l(289032),c=l(525839),g=l(816358),m=l(809295),p=l(15667),h=l(271910),y=l(664897),f=l(785893);let _=void 0!==n?n:n=l(212480);function k({center:e=!1,hasProductFiltersApplied:a,hrefOverride:l,itemHeight:n=o.Lu,marginBottom:k=o.JC,oneBarModulesKey:x,oneBarModulesRest:S,onFilterButtonClick:v,paddingBottom:w=o.uS,paddingX:F=o.jf,setIsEducationModalOpen:b,viewParameter:P,viewType:K}){let T=(0,i.useRef)(null),j=T.current?.firstElementChild?.firstElementChild?.firstElementChild,[L,C]=(0,i.useState)(0),[I,D]=(0,i.useState)(0),[Z,E]=(0,i.useState)(!1),[A,R]=(0,i.useState)(!1),[M,O]=(0,i.useState)(0),N=(0,r.TH)(),U=(0,c.ZP)(),{isRTL:z}=(0,p.B)(),H=(0,i.useRef)(!1),B=(0,y.Z)(),G=new m.ZP,V=(0,t.useFragment)(_,x),W=V&&[V]||S,$=e&&(j?.clientWidth||0)>=(j?.scrollWidth||0);(0,i.useEffect)(()=>{let e=e=>{"Tab"===e.key&&(H.current=!1)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]),(0,i.useEffect)(()=>{C(0)},[N]),(0,i.useEffect)(()=>{D(j?.clientWidth||0);let e=(0,u.Z)(()=>{D(j?.clientWidth||0)},100,{maxWait:200});return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[j]),(0,i.useEffect)(()=>{let e=T.current;return e&&g.Z.addObstruction("top",e),()=>{e&&g.Z.removeObstruction("top",e)}}),(0,i.useEffect)(()=>{let e=j?.scrollWidth||0,a=0;for(let e=0;e<L;e+=1)a+=j?.children[e]?.offsetWidth||0;let l=e-a,n=I>=e;n&&C(0),E(L>0&&!n),R(l>I&&L<W.length&&!n),O(a)},[j,L,W.length,I,M,z]);let Y=()=>{L+3<W.length?C(L+3):C(W.length-1)},X=()=>{L-3>=0?C(L-3):C(0)};return!B&&W.length>0&&(0,f.jsx)(h.q,{children:({hovered:e,onMouseEnter:i,onMouseLeave:t})=>(0,f.jsxs)(s.xu,{ref:T,color:"default",dangerouslySetInlineStyle:{__style:{paddingBottom:w}},"data-root-margin":"search-one-bar","data-test-id":"scrollable-one-bar-root",marginBottom:k,onMouseEnter:i,onMouseLeave:t,position:"relative",children:[(0,f.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{overflowX:"clip"}},paddingX:F,position:"relative",children:(0,f.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{[z?"right":"left"]:`-${M}px`,transition:"left 0.3s, right 0.3s"}},position:"relative",children:(0,f.jsx)(s.kC,{alignItems:"center",gap:{row:2,column:0},height:n,justifyContent:$?"center":void 0,children:W.map((e,n)=>(0,f.jsx)(s.xu,{onFocus:()=>{H.current||C(n)},onMouseDown:()=>H.current=!0,children:(0,f.jsx)(d.Z,{hasProductFiltersApplied:a,hrefOverride:l,impressionsFramework:G,index:n,module:e,oneBarModulesKey:V??null,onFilterButtonClick:v,setIsEducationModalOpen:b,viewParameter:P,viewType:K})},`OneBarModule-${e.entityId||e.id||""}`))})})}),e&&(0,f.jsxs)(s.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{background:(0,o.KC)(z,Z,A),paddingBottom:o.uS,paddingLeft:o.EA,paddingRight:o.EA,pointerEvents:"none"}},"data-test-id":"one-bar-navigation-arrows",display:"flex",justifyContent:"between",left:!0,position:"absolute",right:!0,top:!0,children:[(0,f.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},children:Z&&(0,f.jsx)(s.hU,{accessibilityLabel:U._('Back', 'oneBar.navArrow.back', 'Accessibility laber for a button that navigates back to previous search guides'),bgColor:"white",icon:"arrow-back",onClick:X})}),(0,f.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},children:A&&(0,f.jsx)(s.hU,{accessibilityLabel:U._('Forward', 'oneBar.navArrow.forward', 'Accessibility laber for a button that navigates forward to see more search guides'),bgColor:"white",icon:"arrow-forward",onClick:Y})})]})]})})}},241646:function(e,a,l){l.d(a,{n:()=>n});let n=20},583270:function(e,a,l){l.d(a,{Z:()=>i});var n=l(378888);function i(e,a,l){let i=(0,n.mB)(e.search),t=parseFloat(i.x??""),r=parseFloat(i.y??""),s=parseFloat(i.w??""),o=parseFloat(i.h??"");if(function(...e){return e.every(e=>e>=0&&e<=1)}(t,r,s,o)&&a&&l)return{x:Math.floor(t*a),y:Math.floor(r*l),w:Math.floor(s*a),h:Math.floor(o*l)};{let e=parseInt(i.x??"",10),a=parseInt(i.y??"",10),l=parseInt(i.w??"",10),n=parseInt(i.h??"",10);return!function(...e){return e.every(Number.isInteger)}(e,a,l,n)?null:{x:e,y:a,w:l,h:n}}}},941023:function(e,a,l){l.d(a,{Z:()=>y});var n,i=l(667294);l(167912);var t=l(521009),r=l(187356),s=l(341742),o=l(785893);function d({showAnimation:e,auxData:a,index:l,isStela:n,onClick:i,onHover:d,onUnhover:u,spotlightCenter:c,viewParameter:g,viewType:m}){let p=(0,t.Z)(),h=n?1221:1260;(0,s.Z)(()=>{p({event_type:120,element:h,aux_data:a,view_parameter:g,view_type:m})});let y=parseFloat((.1*(l+1)).toFixed(2)),f={animation:e?`spotlightDotPop 0.6s ease-out ${y}s both`:"none"};return(0,o.jsx)(r.Z,{onClick:()=>{p({aux_data:a,element:h,event_type:101,view_parameter:g,view_type:m}),i(l)},onMouseEnter:({event:e})=>{e&&(e.stopPropagation(),e.preventDefault()),d?.(l)},onMouseLeave:({event:e})=>{e&&(e.stopPropagation(),e.preventDefault()),u?.()},style:f,x:c.x,y:c.y})}var u=l(779548),c=l(369416),g=l(431338),m=l(556872);let p=`
@keyframes spotlightDotPop {
  0% {
    transform: scale(0);
  }

  100% {
    transform: scale(1);
  }
}`,h=void 0!==n?n:n=l(625957),y=({showAnimation:e,pinKey:a,imageSignature:l,imageSize:n,currentSpotlightIdx:t,handleSpotlightClick:r,handleSpotlightHover:s,handleSpotlightUnhover:y,viewParameter:f,viewType:_,visualObjects:k})=>{let x=(0,u.Z)(h,a),S=(0,g.Z)(x),v=x?(x.visualObjects??[]).filter(e=>e.isStela):k??[];return(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(c.Z,{unsafeCSS:p}),v.map((a,i)=>{if(i===t)return null;let{x:u,y:c,w:g,h:p}=a,h=(0,m.Z)({cropArea:{x:u,y:c,w:g,h:p},scaledWidth:n.width??0,scaledHeight:n.height??0}),k={x:h.x+h.w/2,y:h.y+h.h/2},v={...S({override:{entrypoint:"flashlight"}}),pin_id:x?.entityId??"",image_signature:l,visual_objects:JSON.stringify([{x:a.x,y:a.y,w:a.w,h:a.h}])},w=`${k.x}${k.y}`;return(0,o.jsx)(d,{auxData:v,index:i,isStela:!!a?.isStela,onClick:r,onHover:s,onUnhover:y,showAnimation:e,spotlightCenter:k,viewParameter:f,viewType:_},w)})]})}},351222:function(e,a,l){l.d(a,{Pw:()=>n,SB:()=>i,ZP:()=>r,x9:()=>t});let n=80,i=55,t=e=>"phone"===e?i:n;function r(e,a){return a?0:t(e)}},166379:function(e,a,l){l.d(a,{Z:()=>r,k:()=>n.kH});var n=l(654937),i=l(15667),t=l(785893);let r=({dateFormatType:e,useUTC:a=!0,value:l})=>(0,t.jsx)(i.LC,{children:i=>(0,n.ZP)(i.locale,l,e,a)})},562915:function(e,a,l){l.d(a,{L:()=>s,Z:()=>r});var n=l(883119),i=l(274320),t=l(15667);let r=()=>(0,n.Z6)({webExperimentName:"web_gestalt_visualrefresh",mwebExperimentName:"web_gestalt_visualrefresh"}),s=()=>{let e="default",{locale:a}=(0,t.B)(),{checkExperiment:l}=(0,i.F)();return"enabled_pinrep"===l("web_gestalt_visualrefresh").group?(({"ar-SA":"tall","bn-IN":"tall","hi-IN":"tall","te-IN":"tall","ko-KR":"ck","zh-CN":"ck","zh-TW":"ck",ja:"ja","th-TH":"th","vi-VN":"vi"})[a]??e)===e?"compact":"none":void 0}},115247:function(e,a,l){l.d(a,{Z:()=>r});var n=l(667294);function i(e,a,l){var n;return(a="symbol"==typeof(n=function(e,a){if("object"!=typeof e||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var n=l.call(e,a||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(a,"string"))?n:n+"")in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}class t extends n.Component{constructor(...e){super(...e),i(this,"ref",(0,n.createRef)()),i(this,"observer",null),i(this,"handleVisibilityChanged",(e,a)=>{this.props.onVisibilityChange(e,a)})}componentDidMount(){this.ref&&this.ref.current&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.ref.current))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.ref.current),delete this.observer)}render(){return this.props.children(this.ref)}}let r=t},267828:function(e,a,l){l.d(a,{r:()=>n});function n(e,a,l){return!!(e&&e.trim().length>0&&a&&!l)}},110870:function(e,a,l){l.d(a,{Z:()=>n});function n({embedSrc:e,embedType:a,imagesUrls:l,preferredResolution:n,excludeOriginals:i}){if(!e&&!a&&!l)return"";if("gif"===a)return e||"";if(!l)return"";if(n){let e="474x"===n&&l["474x"]||"236x"===n&&l["236x"]||l["736x"];if(e)return e}let t=Object.keys(l).reduce((e,a)=>{try{let n=a.split("x")[0];if(Number.isNaN(Number(n)))return{...e,[a]:l[a]};return{...e,[n]:l[a]}}catch(a){return e}},{}),r=Object.keys(t);return i&&"orig"===r[r.length-1]&&r.pop(),t[r.pop()]||""}},918874:function(e,a,l){l.d(a,{Z:()=>s}),l(167912);var n,i=l(779548),t=l(525839);let r=void 0!==n?n:n=l(799956),s=e=>{let a,l=(0,t.ZP)(),n=(0,i.Z)(r,e),s=n.trackedLink||n.link||n.imageSpec_orig&&n.imageSpec_orig.url,{richMetadata:o,richSummary:d}=n,u=l._('Saved from ', 'Closeup pin annotation', 'Closeup pin annotation');return o&&o.products&&o.products[0]&&o&&o.products[0].name&&o.products[0].offerSummary&&(u=l._('Product sold by ', 'pin annotation', 'pin annotation'),a=(o.products?.[0]||void 0)?.offerSummary),!a&&d&&d&&d.products&&d.products[0]&&d&&d.products[0].name&&d.products[0].offerSummary&&(u=l._('Product sold by ', 'pin annotation', 'pin annotation')),{pinLink:s,pinCreditPrefix:u,pinTitle:n.closeupUnifiedTitle,pinDescription:n.closeupUnifiedDescription,pinCategory:n.category}}},940280:function(e,a,l){l.d(a,{i:()=>n});let n={AC:"ac",AUTOCOMPLETE:"autocomplete",BOARD:"blp",CONTENT_TYPE_FILTER:"content_type_filter",DIRECT_NAVIGATION:"direct_navigation",FILTER:"filter",GUIDED_SEARCH_ENTRY:"guided_search_entry",GUIDED_SEARCH_LANDING:"guided_search_landing",HASHTAG_CLOSEUP:"hashtag_closeup",HASHTAG_PINREP:"hashtag_pinrep",HOMEFEED_BUBBLE:"homefeed_bubble",HUB_PAGE:"hub_page",IDEAS_ROOT:"ideas_root",IMAGE_ONLY_ATTRIBUTION:"image_only_attribution",LANDING_PAGE_STORY:"landing_page_story",NO_RESULTS_SEARCH_STORY:"no_results_search_story",PRODUCT:"product",REMOVE:"remove",RS:"rs",SHOPPING_FILTER:"shopping_filter",SITELINKS_SEARCHBOX:"sitelinks_searchbox",SLP_REC_CURATED:"slp_rec_curated",SLP_REC_TRENDING:"slp_rec_trending",SRS:"srs",STRUCTURED_GUIDE:"structured_guide",TRENDING:"trending",TYPED:"typed",TYPO_AUTO_ORIGINAL:"typo_auto_original",TYPO_SUGGESTION:"typo_suggestion",UNKNOWN:"Unknown",URECS:"urecs",VANILLA_GUIDE:"guide",VIDEO:"video",VOICE_SEARCH:"voice_search"}},324307:function(e,a,l){l.d(a,{ZP:()=>i,mP:()=>n});let n="…";function i(e,a=80,l=n,t=!1){let r;if(!e)return"";if(e.length<=a)return e;if(" "!==e[a-1]&&" "===e[a]||t)r=e.substring(0,a);else{let l=e.lastIndexOf(" ",a);r=e.substring(0,l)}return(r=r.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+l}},123998:function(e,a,l){l.d(a,{Z:()=>f});var n=l(667294),i=l(883119),t=l(390843),r=l(115247),s=l(15667),o=l(734215),d=l(732888),u=l(738140),c=l(166641),g=l(169053),m=l(785893);function p(e,a,l){var n;return(a="symbol"==typeof(n=function(e,a){if("object"!=typeof e||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var n=l.call(e,a||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(a,"string"))?n:n+"")in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}class h extends n.Component{constructor(e){super(e),p(this,"componentWillUnmount",()=>{this.unregisterComponent()}),p(this,"getContext",()=>{let{clientTrackingParams:e,component:a,element:l,objectId:n,timeSpentContext:i,view:t,viewParameter:r}=this.props;return{view:t||i?.view,viewParameter:r||i?.viewParameter,component:a||i?.component,element:l,objectId:n||i?.objectId,clientTrackingParams:e||i?.clientTrackingParams,getParentUuid:()=>this.getUuid(),getGrandparentUuid:()=>this.getParentId()}}),p(this,"getLoggerContext",()=>{let e={...this.getContext()};return delete e.getParentUuid,e}),p(this,"getParentId",()=>{let{timeSpentContext:e,shouldUseGrandparentId:a=!1}=this.props;if(a&&e&&e.getGrandparentUuid){let a=e.getGrandparentUuid();if(a)return a}return e?.getParentUuid?.()}),p(this,"getUuid",()=>this.state.timedPair?this.state.timedPair.uuid:void 0),p(this,"getTimedPair",()=>this.state.timedPair),p(this,"setTimedPair",(e,a)=>{this.setState({timedPair:e},()=>{a&&a()})}),p(this,"isRegistered",!1),p(this,"registerComponent",()=>{this.props.timeSpentManager.registerComponent(this),this.isRegistered=!0}),p(this,"unregisterComponent",()=>{this.isRegistered&&(this.props.timeSpentManager.unregisterComponent(this),this.isRegistered=!1)}),p(this,"handleVisibilityChange",e=>{let{intersectionRatio:a}=e[0],{bottom:l,left:n,right:i,top:t}=e[0].intersectionRect;a>0?this.registerComponent():0===a&&(0===l&&0===n&&0===i&&0===t?this.unregisterComponent():this.registerComponent())}),this.state={timedPair:new d.Z(this.getLoggerContext())}}componentDidUpdate(e){!this.isRegistered||e.view===this.props.view&&e.viewParameter===this.props.viewParameter&&e.component===this.props.component&&e.element===this.props.element&&e.objectId===this.props.objectId&&(0,o.Z)(e.auxData,this.props.auxData)&&(0,o.Z)(e.viewData,this.props.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent))}render(){let{children:e,intersectionObserverBoxHeight:a}=this.props;return(0,m.jsx)(u.$,{value:this.getContext(),children:(0,m.jsx)(r.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:l=>(0,m.jsx)(i.xu,{ref:l,height:a??"100%",children:n.Children.only(e)})})})}}function y(e){let a=(0,t.Hv)(),l=(0,u.Z)(),i=(0,c.Z)(),r=(0,g.H0)(),{requestIdentifier:o=""}=(0,s.B)(),d={app_instance_id:o.slice(0,8),...e.auxData??{}};return(0,n.useEffect)(()=>{i?.setHistoryStackContext(a)},[a,i]),(0,n.useEffect)(()=>{i?.setPins(r??{})},[r,i]),i?(0,m.jsx)(h,{...e,auxData:d,timeSpentContext:l,timeSpentManager:i,children:e.children}):e.children}y.displayName="DeprecatedTimeSpent";let f=y},738140:function(e,a,l){l.d(a,{$:()=>n,Z:()=>i});let{Provider:n,useMaybeHook:i}=(0,l(729434).Z)("timeSpentContext")},732888:function(e,a,l){l.d(a,{Z:()=>s,h:()=>r});var n=l(172045),i=l(17314);function t(e,a,l){var n;return(a="symbol"==typeof(n=function(e,a){if("object"!=typeof e||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var n=l.call(e,a||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(a,"string"))?n:n+"")in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}let r="undefined"!=typeof window&&window.performance&&window.performance.now?()=>Math.floor(1e6*window.performance.now()):()=>1e6*Date.now(),s=class{constructor(e){t(this,"start",()=>(this.startTime=r(),this.startTime)),t(this,"end",()=>(this.endTime=r(),this.duration=this.startTime?this.endTime-this.startTime:null,this.duration));try{this.uuid=(0,n.Z)()}catch(e){this.uuid=(0,i.Z)()}e&&Object.assign(this,e)}}},634737:function(e,a,l){l.d(a,{Z:()=>n});function n(e){if((e||"").includes("--")){let a=e.split("--"),l=a.pop();return{text:a.join("--"),pinId:l}}return{text:"",pinId:e}}},359829:function(e,a,l){l.d(a,{Z:()=>n});function n(e,a){let l=0,n=!1,i=-1;return e.forEach((e,t)=>{let{x:r=0,y:s=0,h:o=0,w:d=0}=e,u=function(e,a){let{x:l,y:n,w:i,h:t}=e,{x:r,y:s,w:o,h:d}=a,u=Math.max(l,r),c=Math.min(l+i,r+o),g=Math.max(n,s),m=Math.min(n+t,s+d),p=u<c&&g<m?(c-u)*(m-g):0;return p/(i*t+o*d-p)}(a,{x:r,y:s,h:o,w:d});u>=.9&&u>l&&(l=u,n=!0,i=t)}),{isCropAreaOnDotArea:n,indexToHide:i}}},611304:function(e,a,l){l.d(a,{Z:()=>n});function n(e){return{h:e?.h??void 0,is_stela:e?.isStela??void 0,labelId:e?.labelId??void 0,label_x:e?.labelX??void 0,label_y:e?.labelY??void 0,label:e?.label??void 0,max_annotation_num_documents:e?.maxAnnotationNumDocuments??void 0,score:e?.score??void 0,show_on_closeup:e?.showOnCloseup??void 0,title:e?.title??void 0,w:e?.w??void 0,x:e?.x??void 0,y:e?.y??void 0}}},936068:function(e,a,l){l.d(a,{Z:()=>f});var n,i=l(667294);l(167912);var t=l(616550),r=l(883119),s=l(318812),o=l(980787),d=l(642407),u=l(779548),c=l(728994),g=l(556872),m=l(870358),p=l(323346),h=l(785893);let y=void 0!==n?n:n=l(582328);function f({bitmapMasks:e,hoveredCutoutIndex:a,imageContainerX:n,imageContainerY:f,pinImageHovered:_,pinKey:k,selectedCutoutIndex:x,setHoveredCutoutIndex:S,setSelectedCutoutBitmapMask:v,setSelectedCutoutIndex:w,surfaceType:F,trafficSource:b,viewParameter:P,viewType:K}){let{logContextEvent:T}=(0,o.v)(),j=(0,t.k6)(),L=(0,t.TH)(),C=(0,u.Z)(y,k),{getNormalizedPinImage:I}=(0,c.Z)({pinKey:C,maxWidth:d.Wm}),D=(0,i.useRef)(null),[Z,E]=(0,i.useState)(!1),[A,R]=(0,i.useState)([]),[M,O]=(0,i.useState)(!1),[N,U]=(0,i.useState)(!1),{height:z,width:H}=I(),B=L.pathname.includes("visual-search"),G=L.pathname.includes(s.ZP),V=(0,i.useMemo)(()=>({commerce_data:JSON.stringify({pin_has_cutout:!0})}),[]);(0,i.useEffect)(()=>{if(!e)return;let a=[];async function n({id:e,isHidden:n,maskHeightRatio:i,maskImage:t,maskWidthRatio:r,maskXRatio:s,maskYRatio:o,pinImageHeight:d,pinImageWidth:u}){let{ContourTracer:c}=await l.e("10859").then(l.bind(l,288638)),g=new c,m=await l.e("79330").then(l.bind(l,510786));await m.default();let p=atob(t),h=new Blob([Uint8Array.from(p,e=>e.charCodeAt(0))],{type:"image/png"}),y=await createImageBitmap(h),f=g.trace(y,{useAlpha:!1,threshold:80}),_=URL.createObjectURL(h);return a.push(_),{contours:f,contourXRatio:u*r/y.width,contourYRatio:d*i/y.height,id:e,isHidden:n,maskHeightRatio:i,maskUrl:_,maskWidthRatio:r,maskXRatio:s,maskYRatio:o}}let i=[];return e.forEach(e=>{let{id:a,mask_image:l,mask_bounds:t,is_hidden:r}=e,[s,o]=t?.[0]??[],[d,u]=t?.[1]??[];if(void 0!==a&&void 0!==l&&void 0!==s&&void 0!==o&&void 0!==d&&void 0!==u){let e=n({id:a,isHidden:!!r,maskHeightRatio:u,maskImage:l,maskWidthRatio:d,maskXRatio:s,maskYRatio:o,pinImageHeight:z,pinImageWidth:H});i.push(e)}}),(async()=>{R(await Promise.all(i))})(),()=>{a.forEach(e=>{URL.revokeObjectURL(e)})}},[e,z,H]);let W=(0,i.useMemo)(()=>{let e=[];return A.forEach((a,l)=>{let{contours:n}=a;n&&0!==n.length&&(e[l]=n.map(e=>{let a=e.points.map(e=>e.x),l=e.points.map(e=>e.y);return{minX:Math.min(...a),minY:Math.min(...l),maxX:Math.max(...a),maxY:Math.max(...l)}}))}),e},[A]),$=(0,i.useCallback)(e=>{let l=e.clientX-n,i=e.clientY-f;for(let e=A.length-1;e>=0;e-=1){let n=A[e];if(e===x||!n)continue;let{contours:t,contourXRatio:r,contourYRatio:s,maskXRatio:o,maskYRatio:d}=n,u=(l-o*H)/r,c=(i-d*z)/s,g=W[e];if(t.some((e,a)=>{let l=g?.[a];return l&&u>=l.minX&&u<=l.maxX&&c>=l.minY&&c<=l.maxY&&function(e,a){let{x:l,y:n}=e,i=!1,t=0,r=a.length-1;for(;t<a.length;){let{x:e,y:s}=a[t],{x:o,y:d}=a[r];s>n!=d>n&&l<(o-e)*(n-s)/(d-s)+e&&(i=!i),r=t,t+=1}return i}({x:u,y:c},e.points)})){a!==e&&(S?.(e),T({event_type:105,element:14154,view_parameter:P,view_type:K,aux_data:{commerce_data:JSON.stringify({cutout_index:e,pin_has_cutout:!0})}}));return}}S?.(null)},[A,W,a,n,f,T,z,H,x,S,P,K]),Y=()=>{E(!1)},X=e=>{(e.movementX||e.movementY)&&E(!0),$(e)},Q=e=>{$(e)},q=()=>S?.(null),J=(0,i.useCallback)(()=>{if(Z||null===a||!A[a])return;E(!1),w?.(a),v?.(e?.[a]);let{maskXRatio:l,maskYRatio:n,maskWidthRatio:i,maskHeightRatio:t}=A[a],r=(0,g.Z)({cropArea:{x:l,y:n,w:i,h:t},scaledWidth:H,scaledHeight:z}),s=(0,m.Z)({cropArea:r,cropSource:9,surfaceType:F,trafficSource:b});if(s!==window.location.search){T({event_type:101,element:14154,view_parameter:P,view_type:K,aux_data:V});let e=`${window.location.pathname}${B||G?"":"visual-search/"}${s}`;B||G?j.replace(e):j.push(e)}},[V,e,A,Z,j,a,G,B,T,z,H,v,w,F,b,P,K]);return((0,i.useEffect)(()=>{let e=D.current;return e&&(e.addEventListener("mousedown",Y),e.addEventListener("mousemove",X),e.addEventListener("mouseup",Q),e.addEventListener("mouseleave",q),e.addEventListener("click",J)),()=>{e&&(e.removeEventListener("mousedown",Y),e.removeEventListener("mousemove",X),e.removeEventListener("mouseup",Q),e.removeEventListener("mouseleave",q),e.removeEventListener("click",J))}}),e)?(0,h.jsx)(r.xu,{ref:D,bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"number"==typeof a?"pointer":"auto"}},"data-test-id":"cutouts-container",left:!0,position:"absolute",right:!0,top:!0,children:A.map((e,l)=>l===x?null:(0,h.jsx)(p.Z,{auxData:V,bitmapData:e,hasAnimatedCutoutsOnLand:N,hasLoggedRender:M,hoveredCutoutIndex:a,index:l,pinImageHovered:_,pinKey:C,selectedCutoutIndex:x,setHasAnimatedCutoutsOnLand:U,setHasLoggedRender:O,viewParameter:P,viewType:K},e.id))}):null}},68408:function(e,a,l){l.d(a,{Z:()=>d});var n,i=l(667294);l(167912);var t=l(779548),r=l(274320),s=l(886981);let o=void 0!==n?n:n=l(160187);function d({boundingBox:e,pinKey:a}){let{checkExperiment:l}=(0,r.F)(),n=(0,t.Z)(o,a),d=l("dtn_exp6_uve4a").group,u=(0,i.useMemo)(()=>"enabled"===d?{detection_model:"dtn_exp6_yolov8",use_gss:!1,write_to_galaxy:!1}:"enabled_dtn_exp5_skip_gss"===d?{use_gss:!1,write_to_galaxy:!1}:{},[d]),{data:c}=(0,s.Z)(n.entityId?{name:"ApiResource",options:{url:`/v3/pins/${n.entityId}/segmentation/sam/`,data:{bounding_box:e?JSON.stringify({x:Math.min(Math.max(e.x||0,0),1),y:Math.min(Math.max(e.y||0,0),1),width:Math.min(Math.max(e.w||1,0),1),height:Math.min(Math.max(e.h||1,0),1)}):void 0,client:"visual_cutout",cleanup_masks:!0,...u}}}:null);return c}},751961:function(e,a,l){l.d(a,{Z:()=>t});var n=l(366859),i=l(785893);let t=({children:e})=>(0,i.jsx)(n.Z,{onTouch:e=>{if(e.target instanceof HTMLElement&&"IMG"===e.target.tagName){let a=e.target.getBoundingClientRect().top+window.scrollY-70;window.scrollTo(window.scrollX,a)}},pressState:"none",children:e})},425140:function(e,a,l){l.d(a,{G:()=>_,Z:()=>k});var n=l(667294),i=l(883119),t=l(469167),r=l(467925),s=l(93966),o=l(355363),d=l(62937),u=l(647709),c=l(341742),g=l(348268),m=l(357823),p=l(130858),h=l(79293),y=l(648200),f=l(785893);let _=25;function k({customLayoutType:e,dynamicHeights:a,getColumnSpanConfig:l,emptyState:_,feedItems:k,feedKey:x,maxColumns:S,minColumns:v,pagination:{hasNext:w,isLoadingNext:F,loadNext:b,refetch:P},pullToRefresh:K,renderFeedItem:T,serverRender:j,isLoadingStateEnabled:L,isLoadingAccessibilityLabel:C,isLoadedAccessibilityLabel:I}){let D=(0,u.HG)(),{experimentalColumnWidth:Z,experimentalGutter:E}=(0,r.Z)(),[A,R]=(0,n.useState)(!1),M=1===S?window.innerWidth:void 0,O="userSearch"===e?window.innerWidth-16:200,N=F&&0===k.length&&!A&&!L,U="desktopFlashlight"===e||"ideaPage"===e&&D?-2:s.qG,z=v??2;return"userSearch"===e&&(z=1),(0,c.Z)(()=>(window.addEventListener("online",b),()=>window.removeEventListener("online",b))),(0,f.jsxs)(i.xu,{"data-test-id":"MobileFeed",children:[(0,f.jsx)(m.Z,{enabled:!!K,onPull:()=>{P(),R(!0)},refreshing:A}),(0,f.jsxs)(i.xu,{"data-test-id":"grid",marginEnd:U,marginStart:U,opacity:A?.5:1,children:[(0,f.jsx)(o.Z,{isAtEndOfFeed:!w,isPlaceholderGrid:L&&F&&!k.length,itemCount:k.length,children:k.length?(0,f.jsx)(i.xu,{"data-test-id":"feed",marginTop:(0,g.kk)({isDesktop:D}),children:(0,f.jsx)(d.Z.Consumer,{children:i=>(0,f.jsx)(n.Fragment,{children:(0,f.jsx)(y.Z,{children:(0,f.jsx)(t.default,{_dynamicHeights:a,_getColumnSpanConfig:l,align:"ideaPage"===e?"start":void 0,cacheKey:x,columnWidth:D?Z??s.yF:M??O,gutterWidth:D?E??4*s.jC:void 0,id:j?x:void 0,isFetching:F,isLoadedAccessibilityLabel:I??"",isLoadingAccessibilityLabel:C??"",isLoadingStateEnabled:!!L,items:k,loadItems:b,maxColumns:S,minCols:z,optOutFluidGridExperiment:null!=S,renderItem:({data:e,itemIdx:a})=>T(e,a),scrollContainerRef:i,serverRender:j})})})})}):F?(0,f.jsx)(p.Z,{}):_??null}),N&&(0,f.jsx)(i.xu,{column:12,paddingY:2,children:(0,f.jsx)(h.Z,{partialViewportWidth:"desktopFlashlight"===e})})]})]})}},290003:function(e,a,l){l.d(a,{Z:()=>eJ});var n,i,t,r,s,o,d,u=l(667294);l(167912);var c=l(616550),g=l(883119),m=l(779548),p=l(801082),h=l(525839),y=l(886981),f=l(634737),_=l(241646),k=l(583270),x=l(785893);function S({isTopRow:e,image:a}){return(0,x.jsxs)(g.zd,{height:e?217:168,wash:!0,width:e?236:117,children:[a.url&&(0,x.jsx)(g.Ee,{alt:a.alt||"",fit:"cover",naturalHeight:a.height??1,naturalWidth:a.width??1,src:a.url}),!!a.price&&(0,x.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"06px"}},"data-test-id":"shopping-upsell-price",height:24,left:!0,margin:1,paddingX:2,paddingY:1,position:"absolute",top:!0,children:a.price})]})}var v=l(980787),w=l(744862),F=l(351607),b=l(97484),P=l(47426),K=l(483858),T=l(865690);let j={container:{borderRadius:`${b.Oc}px ${b.Oc}px 25px 25px`,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}},L=({images:e,firstImageIndex:a})=>{let l=a+1,n=a+2;return(0,x.jsxs)(g.xu,{overflow:"hidden",rounding:4,children:[(0,x.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:j.content},children:e.at(a)?(0,x.jsx)(S,{image:e[a],isTopRow:!0}):null}),e.length>n?(0,x.jsxs)(g.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,x.jsx)(S,{image:e[l]}),(0,x.jsx)(S,{image:e[n]})]}):null]})};function C({dangerouslySetActionUrl:e,query:a,story:l,slotIndex:n}){let i,t,r,s,o,{logContextEvent:d}=(0,v.v)(),{action:c,id:m,objects:p,story_type:h,subtitle:y}=l,{text:f,url:_}=c||{},[k,S]=(0,u.useState)(!1),b=(0,u.useCallback)(()=>S(!0),[S]),C=(0,u.useCallback)(()=>S(!1),[S]),I=(p||[]).reduce((e,a)=>"pin"!==a.type?e:[...e,{domain:a.domain,image:{alt:a.title||a.description,height:a.images?.["474x"]?.height,url:a.images?.["474x"]?.url,width:a.images?.["474x"]?.width,price:(a.rich_summary?.products?.[0]||{}).offer_summary?.price}}],[]),D=(I[0]||{}).domain||void 0;["search_product_collage_story","shop_article_story"].includes(h)?(i=2,t=43,r={story_id:m,story_type:h,entered_query:a}):"shop_brand_story"===h||"shop_brand_affinity_story"===h?(i=1,t=92,D&&(r={story_type:h,commerce_data:JSON.stringify({domain:D})})):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(h)?(i=72,t=3050):"related_domain_collage"===h?(i=72,t=3455):"related_products_collage"===h&&(i=1,t=3177);let Z=()=>d({event_type:101,element:372,component:200,view_type:i,view_parameter:t,aux_data:{story_type:h}}),E=y?4:2;if(["related_domain_collage","shop_brand_story","shop_brand_affinity_story"].includes(h)&&c){let e=c.user;s=e&&(e.image_medium_url||e.image_large_url),o=e&&e.full_name}let A=e||_;if(!A)return null;let R=(0,P.Z)({url:A})?"nofollow":"none";return(0,x.jsx)(F.F,{componentType:200,contextLogData:r||{},impressionType:"Story",loggingId:h,slotIndex:n,viewParameter:t,viewType:i,children:({impressionTrackerRef:e})=>(0,x.jsx)(g.xu,{ref:e,children:(0,x.jsx)(g.Tg,{href:A,onTap:Z,rel:R,children:(0,x.jsxs)(g.xu,{dangerouslySetInlineStyle:{__style:j.container},onMouseEnter:b,onMouseLeave:C,overflow:"hidden",position:"relative",children:[(0,x.jsx)(L,{firstImageIndex:+!!["related_domain_collage","related_products_collage"].includes(h),images:I.map(({image:e})=>e)}),(0,x.jsx)(g.xu,{alignItems:"center",color:"secondary",display:"flex",justifyContent:"center",marginTop:2,paddingX:3,paddingY:E,rounding:"pill",children:(0,x.jsxs)(g.xu,{alignContent:"start",direction:"column",display:"flex",justifyContent:"center",margin:2,children:[y?(0,x.jsx)(g.xu,{marginBottom:1,children:(0,x.jsx)(g.xv,{align:"start",color:"subtle",children:y.format})}):null,(0,x.jsx)(g.xv,{align:"start",weight:"bold",children:f})]})}),o&&s&&(0,x.jsx)(g.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,x.jsx)(w.qE,{name:o,outline:!0,size:"md",src:s})}),(0,x.jsx)(K.Z,{visibility:k?"visible":"none",children:(0,x.jsx)(T.Z,{additionalStyles:j.visualOverlay})})]})})})})}var I=l(302148),D=l(941404);let Z=void 0!==n?n:n=l(135885),E=()=>{(0,D.NC)("click_best_pin_board",!0)},A=()=>{(0,D.NC)("click_best_pin_profile",!0)},R=({pin:e})=>{let{pinner:a}=e,{username:l,fullName:n}=a??{},i=a?.imageMediumUrl||a?.imageSmallUrl,t=`/${l??""}/`;return(0,x.jsx)(g.Tg,{fullWidth:!1,href:t,onTap:A,rounding:"circle",children:(0,x.jsx)(w.qE,{name:n??"",outline:!0,size:"sm",src:i??""})})},M=({pin:e})=>{let a=(0,h.ZP)(),{board:l,pinner:n}=e,{name:i,privacy:t,url:r}=l??{},s=l?.entityId||"",{username:o,fullName:d}=n??{},u=`/${o??""}/`,c=(0,x.jsx)(g.xv,{inline:!0,size:"200",weight:"bold",children:(0,x.jsx)(g.rU,{display:"inlineBlock",href:u,onClick:A,underline:"hover",children:d})},d);return"protected"===t?(0,I.nk)(a._('{{ pinnerName }} saved this Pin', 'Showing who saved this pin, but not which board (private board), on closeup', 'Showing who saved this pin, but not which board (private board), on closeup'),{pinnerName:c}):(0,I.nk)(a._('{{ pinnerName }} saved to {{ boardName }}', 'Showing who saved this pin to which board on closeup', 'Showing who saved this pin to which board on closeup'),{pinnerName:c,boardName:(0,x.jsx)(g.xv,{inline:!0,size:"200",weight:"bold",children:(0,x.jsx)(g.rU,{href:r??"",onClick:E,children:i},"board")},s)})},O=({pinKey:e})=>{let a=(0,m.Z)(Z,e);return(0,x.jsxs)(g.xu,{alignItems:"center","data-test-id":"pin-attribution",direction:"row",display:"flex",marginTop:3,children:[(0,x.jsx)(R,{pin:a}),(0,x.jsx)(g.xu,{marginEnd:2}),(0,x.jsx)(g.xv,{size:"200",children:(0,x.jsx)(M,{pin:a})})]})},N=e=>{e.target&&e.target instanceof HTMLElement&&(e.target.style.textDecoration="underline")},U=e=>{e.target&&e.target instanceof HTMLElement&&(e.target.style.textDecoration="none")};var z=l(521009);function H({pageType:e,pinCreditPrefix:a,pin:l,pinLink:n,viewParameter:i}){let t=(0,h.ZP)(),r=(0,z.Z)();if("topic"!==e.page&&(!l.domain||"Uploaded by user"===l.domain))return null;let s="topic"!==e.page||e.isAuth?"100":"200",o="topic"===e.page&&!!l.nativeCreator,d=o?l.nativeCreator?.fullName:l.domain;return(0,x.jsx)(g.xu,{display:"flex",flex:"none",justifyContent:"start",marginBottom:2,children:(0,x.jsx)(g.rU,{display:"inlineBlock",href:o?`/${l.nativeCreator?.username||""}/`:n,onClick:()=>{"topic"===e.page?(0,D.NC)("click_topic_best_pin_link"):r({event_type:12,view_type:3,object_id_str:l.entityId,component:85,view_parameter:i})},rel:"nofollow",target:"blank",underline:"hover",children:(0,x.jsx)(g.xv,{size:s,children:(0,I.nk)(t._('{{ pinCreditPrefix }} {{ pinCredit }}', 'Tells the user where the pin is from in the form of "Saved from <website>"', 'Tells the user where the pin is from in the form of "Saved from <website>"'),{pinCreditPrefix:a,pinCredit:(0,x.jsx)(g.xv,{inline:!0,size:s,weight:"bold",children:"topic"!==e.page?(0,x.jsxs)("span",{"data-gestalt-valid-html":"Text",onBlur:U,onFocus:N,onMouseLeave:U,onMouseOver:N,children:[" ",l.domain]}):d},o?"creatorProfile":"pinLinkDomain")})})})})}var B=l(166379),G=l(110870),V=l(267828),W=l(695263),$=l(918874),Y=l(873408),X=l(776250),Q=l(492841),q=l(594414);let J=void 0!==i?i:i=l(815025);function ee({recipeKey:e}){let a=(0,m.Z)(J,e);if(a?.aggregateRating?.ratingValue&&a.aggregateRating.reviewCount){let e="number"==typeof a.cookTimes?.cook?.m&&"number"==typeof a.cookTimes.prep?.m?`${a.cookTimes.cook.m+a.cookTimes.prep.m} minutes \xb7 `:"";return(0,x.jsxs)(u.Fragment,{children:[(0,x.jsx)(q.Z,{max_rating:a.aggregateRating.bestRating,rating:a.aggregateRating.ratingValue},a.aggregateRating.ratingValue),(0,x.jsx)(g.xv,{inline:!0,size:"200",children:` ${a.aggregateRating.reviewCount} \xb7 ${e}`})]})}return null}var ea=l(15667);let el=void 0!==t?t:t=l(5375),en=e=>{let a=null;e.lastRepinDate&&(a=new Date(e.lastRepinDate));let l=null;return(e.createdAt&&(l=new Date(e.createdAt)),a)?l?a>l?a:l:a:l},ei=e=>{let a="";if(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished)return a;let l=en(e);if(l&&l.getFullYear()===new Date().getFullYear()){let n=new Set(["film_music_books","art","home_decor","food_drink","womens_fashion","travel","weddings","hair_beauty","holidays_events","mens_fashion","products","celebrities","technology"]),{category:i}=e;n.has(i)&&(a=l?(0,x.jsx)(B.Z,{dateFormatType:B.k.LONG_MONTH_YEAR,useUTC:!1,value:l}):"")}return a},et=e=>!!(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished),er=(e,a)=>{let l=new Date((e.richMetadata??{}).article?.datePublished??Date.now()),n=l.getTime(),i=new Date().getTime();return null==a||i-n<=31536e6*a?(0,x.jsx)(B.Z,{dateFormatType:B.k.LONG_MONTH_YEAR,useUTC:!1,value:l}):""};function es(e){let{pinKey:a,viewportSize:l,pageType:n}=e,i=(0,m.Z)(el,a),{pinCreditPrefix:t,pinLink:r}=(0,$.Z)(i),s=(0,Y.Z)(i),{description:o}=(0,W.eK)({richMetadataDescription:i.richMetadata?.description,richSummaryDisplayName:i.richSummary?.displayName,closeupUnifiedDescription:i.closeupUnifiedDescription});"videos_category"===n.page&&(o=(0,W.kt)(o,i.nativeCreator?.username||""));let d="wide"===l,u=(0,W.Ly)({pinTitle:i.title,gridTitle:i.gridTitle,richSummaryDisplayName:i.richSummary?.displayName??"",richMetadataTitle:i.richMetadata?.title??"",storyPinDataId:i.storyPinDataId,storyPinDataMetadataPinTitle:i.storyPinData?.metadata?.pinTitle,pinJoinVisualAnnotation:i.pinJoin?.visualAnnotation});(i.gridTitle||"").trim()&&u!==i.gridTitle&&(u=(0,W.EU)(i.gridTitle,200));let c=(0,V.r)(i.richMetadata?.recipe?.name,!!i.richMetadata?.recipe?.categorizedIngredients,i.richMetadata?.recipe?.fromAggregatedData??!1)?i.richMetadata?.recipe:null,p=et(i)&&er(i,2),h=ei(i)||p,{isBot:y,isSocialBot:f}=(0,ea.B)();return(0,x.jsx)(g.xu,{alignContent:"between","data-test-id":"UnauthBestPinCardBodyContainer",direction:"column",display:"flex",flex:"grow",padding:8,position:"relative",width:"100%",children:(0,x.jsxs)(g.xu,{direction:"column",display:"flex",flex:"grow",position:"relative",children:[(0,x.jsx)(H,{pageType:n,pin:{entityId:i.entityId,domain:i.domain||"",nativeCreator:i.nativeCreator&&{fullName:i.nativeCreator.fullName,username:i.nativeCreator.username}},pinCreditPrefix:"topic"===n.page&&i.nativeCreator?"Created by":t,pinLink:r??"",viewParameter:(0,X.Z)({hasPin:!0,hasPinRichMetadata:!!i.richMetadata,hasPinRichMetadataProducts:!!i.richMetadata?.products,hasPinRichMetadataArticle:!!i.richMetadata?.article,hasPinRichMetadataRecipe:!!i.richMetadata?.recipe,hasPinStoryPinData:!!i.storyPinData})}),(0,x.jsx)(g.kC,{direction:"row",justifyContent:"between",children:(0,x.jsx)(g.xu,{display:"flex",marginEnd:3*!d,marginTop:3*!!d,overflow:"hidden",children:u&&(0,x.jsx)("h2",{"data-test-id":"UnauthBestPinCardTitle",style:{fontWeight:600,fontSize:"28px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:u})})}),h?(0,x.jsx)(g.xu,{marginTop:1,children:(0,x.jsx)(g.xv,{color:"subtle",children:h})}):null,o&&(0,x.jsx)(g.xu,{display:"flex",marginTop:3,overflow:"hidden",children:(0,x.jsxs)("h3",{style:{fontWeight:"normal",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",fontSize:"14px"},children:[c&&(0,x.jsx)(ee,{recipeKey:c}),o]})}),c&&(0,x.jsx)(Q.Z,{marginOverrides:c?{outerMarginTop:32,ingredientMarginBottom:4}:null,recipeProps:{recipe:{categorizedIngredients:c.categorizedIngredients,name:c.name,image:(0,G.Z)({imagesUrls:s,embedSrc:i.embed?.src,embedType:i.embed?.type,excludeOriginals:!y&&!f})}}}),(0,x.jsx)(g.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginTop:2,children:(0,x.jsx)(O,{pinKey:i})})]})})}var eo=l(642407),ed=l(633301);let eu={nw:0,ne:90,se:180,sw:270},ec={ne:[7,-7],se:[7,7],sw:[-7,7],nw:[-7,-7]},eg={nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},em=(e,a,l,n)=>{if("rounded"!==n)return`translate(${a}, ${l}), rotate(${eu[e]})`;{let[n,i]=ec[e];return`translate(${a+n}, ${l+i}), rotate(${eu[e]})`}};function ep({corner:e,x:a,y:l,size:n,cornerStyle:i}){return(0,x.jsxs)("g",{"data-test-id":`cropper-corner-${e}`,style:{cursor:eg[e],pointerEvents:"auto"},transform:em(e,a,l,i),children:[(0,x.jsx)("rect",{className:`cropperHandle ${e}`,fill:"rgba(0,0,0,0)",height:n,stroke:"none",width:n,x:0,y:0}),"rounded"===i?(0,x.jsx)("path",{className:`cropperHandle ${e}`,d:"M16 0H24V8H16C11.5817 8 8 11.5817 8 16V24H0V16C0 7.16343 7.16345 0 16 0Z",fill:"#fff"}):(0,x.jsx)("path",{className:`cropperHandle ${e}`,d:`M ${n} 0 L 0 0 L 0 ${n}`,fill:"none",stroke:"#fff",strokeWidth:6})]})}let eh={n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize"};function ey({edge:e,x:a,y:l,w:n,h:i}){return(0,x.jsx)("rect",{className:`cropperHandle ${e}`,fill:"rgba(0,0,0,0)",height:i,stroke:"none",style:{cursor:eh[e],pointerEvents:"auto"},width:n,x:a,y:l})}function ef({x:e,y:a,w:l,h:n}){let i="rounded";return(0,x.jsxs)(u.Fragment,{children:[(0,x.jsx)(ep,{corner:"nw",cornerStyle:i,size:20,x:e,y:a}),(0,x.jsx)(ep,{corner:"ne",cornerStyle:i,size:20,x:e+l,y:a}),(0,x.jsx)(ep,{corner:"sw",cornerStyle:i,size:20,x:e,y:a+n}),(0,x.jsx)(ep,{corner:"se",cornerStyle:i,size:20,x:e+l,y:a+n}),(0,x.jsx)(ey,{edge:"n",h:30,w:Math.max(l-40,0),x:e+20,y:a-10}),(0,x.jsx)(ey,{edge:"e",h:Math.max(n-40,0),w:30,x:e+l-20,y:a+20}),(0,x.jsx)(ey,{edge:"s",h:30,w:Math.max(l-40,0),x:e+20,y:a+n-10}),(0,x.jsx)(ey,{edge:"w",h:Math.max(n-40,0),w:30,x:e-20,y:a+20})]})}var e_=l(598600),ek=l(187356),ex=l(369416),eS=l(341742),ev=l(323346);function ew(e){let{children:a,cropArea:l,imageSize:n,objectDetection:i,onChange:t,previewCropArea:r,showPreviewArea:s,viewParameter:o,viewType:d}=e,c=(0,z.Z)(),m=(0,u.useRef)(null),p=(0,u.useRef)(null),[h,y]=(0,u.useState)(0),[f,_]=(0,u.useState)(0),[k,S]=(0,u.useState)(0),[v,w]=(0,u.useState)(0),[F,b]=(0,u.useState)((0,e_.Z)({cropArea:l,imageSize:n})),[P,K]=(0,u.useState)(null),[T,j]=(0,u.useState)(null),[L,C]=(0,u.useState)(!1),[I,D]=(0,u.useState)(!1),Z=e=>{e.preventDefault(),e.stopPropagation();let{clientX:a,clientY:l}=e,n=a-h,i=l-f;D(!1),S(n),w(i);let t=e.target,r=t.classList.contains("cropperHandle"),s="shadowMask"===t.id,o="cropSection"===t.id,d=t.id===ek.P,u=t.id===ev.I;r?(K("resize"),t.classList.contains("ne")?j("ne"):t.classList.contains("nw")?j("nw"):t.classList.contains("se")?j("se"):t.classList.contains("sw")?j("sw"):t.classList.contains("n")?j("n"):t.classList.contains("s")?j("s"):t.classList.contains("e")?j("e"):t.classList.contains("w")&&j("w")):s?(K("select"),b(eo.OI)):o?K("move"):(F.x<n&&n<F.x+F.w&&F.y<i&&i<F.y+F.h?K("move"):(K("select"),b(eo.OI)),C(d||u))},E=e=>{if(!P)return;C(!1);let{clientX:a,clientY:l}=e,i=a-h,t=l-f;if("resize"===P){let e=Math.max(Math.min(i,(n.width??1)-eo.SP),eo.SP),a=Math.max(Math.min(t,(n.height??1)-eo.SP),eo.SP),{x:l,y:r,w:s,h:o}=F;switch(T){case"ne":e<l&&a>r+o?j("sw"):e<l?j("nw"):a>r+o&&j("se");break;case"nw":e>l+s&&a>r+o?j("se"):e>l+s?j("ne"):a>r+o&&j("sw");break;case"se":e<l&&a<r?j("nw"):e<l?j("sw"):a<r&&j("ne");break;case"sw":e>l+s&&a<r?j("ne"):e>l+s?j("se"):a<r&&j("nw");break;case"n":a>r+o&&j("s");break;case"s":a<r&&j("n");break;case"e":e<l&&j("w");break;case"w":e>l+s&&j("e")}switch(T){case"ne":b(({x:l,y:n,h:i})=>{let t=Math.max(e-l,eo.xZ),r=Math.max(i+(n-a),eo.xZ);return{x:l,y:r<=eo.xZ?n:a,w:t,h:r}});break;case"nw":b(({x:l,y:n,w:i,h:t})=>{let r=Math.max(i+(l-e),eo.xZ),s=Math.max(t+(n-a),eo.xZ);return{x:r===eo.xZ?l:e,y:s===eo.xZ?n:a,w:r,h:s}});break;case"se":b(({x:l,y:n})=>{let i=Math.max(e-l,eo.xZ),t=Math.max(a-n,eo.xZ);return{x:l,y:n,w:i,h:t}});break;case"sw":b(({x:l,y:n,w:i})=>{let t=Math.max(i+(l-e),eo.xZ),r=Math.max(a-n,eo.xZ);return{x:t===eo.xZ?l:e,y:n,w:t,h:r}});break;case"n":b(({x:e,y:l,w:n,h:i})=>{let t=Math.max(l-a+i,eo.xZ);return{x:e,y:t===eo.xZ?l:a,w:n,h:t}});break;case"s":b(({x:e,y:l,w:n})=>{let i=Math.max(a-l,eo.xZ);return{x:e,y:l,w:n,h:i}});break;case"e":b(({x:a,y:l,h:n})=>{let i=Math.max(e-a,eo.xZ);return{x:a,y:l,w:i,h:n}});break;case"w":b(({x:a,y:l,w:n,h:i})=>{let t=Math.max(n-e+a,eo.xZ);return{x:t===eo.xZ?a:e,y:l,w:t,h:i}})}}else if("move"===P){let e=i-k,a=t-v,l=Math.max(Math.min(F.x+e,(n.width??1)-F.w-eo.SP),eo.SP),r=Math.max(Math.min(F.y+a,(n.height??1)-F.h-eo.SP),eo.SP);S(i),w(t),b(({w:e,h:a})=>({x:l,y:r,w:e,h:a}))}else if("select"===P){let e=Math.max(Math.min(i,n.width??1),0),a=Math.max(Math.min(t,n.height??1),0);b({x:Math.min(k,e),y:Math.min(v,a),w:Math.abs(e-k),h:Math.abs(a-v)})}},A=()=>{if(K(null),j(null),C(!1),P){if(L&&"dots"===i)return void D(!0);if(0===F.w&&0===F.h)t({cropArea:{x:eo.SP,y:eo.SP,w:(n.width??1)-2*eo.SP,h:(n.height??1)-2*eo.SP},cropSource:5}),c({event_type:16586,view_type:d,view_parameter:o});else{let e,a,l=Math.max(Math.min(F.x,(n.width??1)-eo.xZ-eo.SP),eo.SP),i=Math.max(Math.min(F.y,(n.height??1)-eo.xZ-eo.SP),eo.SP);e=F.h<eo.xZ?eo.xZ:i+F.h>(n.height??1)-eo.SP?(n.height??1)-i-eo.SP:F.h,a=F.w<eo.xZ?eo.xZ:l+F.w>(n.width??1)-eo.SP?(n.width??1)-l-eo.SP:F.w,"move"===P?c({event_type:7603,view_type:d,view_parameter:o}):"resize"===P?c({event_type:7604,view_type:d,view_parameter:o}):"select"===P&&c({event_type:16584,view_type:d,view_parameter:o}),t({cropArea:{x:l,y:i,w:a,h:e},cropSource:6})}}};return(0,eS.Z)(()=>{if(p.current){let{x:e,y:a}=p.current.getBoundingClientRect();y(e),_(a)}}),(0,u.useEffect)(()=>{I&&b(l??eo.OI)},[l,I]),(0,u.useEffect)(()=>{let e=p.current;return e&&(e.addEventListener("mousedown",Z),window.addEventListener("mousemove",E),window.addEventListener("mouseup",A)),()=>{e&&(e.removeEventListener("mousedown",Z),window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",A))}}),(0,x.jsxs)(g.xu,{ref:p,dangerouslySetInlineStyle:{__style:{cursor:"crosshair"}},"data-test-id":"visual-search-cropper",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:[(0,x.jsx)(ex.Z,{unsafeCSS:eo.iC}),(0,x.jsxs)("svg",{"data-gestalt-valid-html":"Box",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:[(0,x.jsx)("defs",{children:(0,x.jsxs)("mask",{id:"Mask",children:[(0,x.jsx)("rect",{fill:"white",height:n.height??"100%",rx:"0",ry:"0",width:n.width??"100%",x:"0",y:"0"}),(0,x.jsx)("rect",{height:F.h,id:"hole",rx:0,ry:0,width:F.w,x:F.x,y:F.y},`${F.x}${F.y}`),(0,x.jsx)(ed.Z,{classNames:"preview-crop-area",in:s&&!P,mountOnEnter:!0,nodeRef:m,timeout:300,unmountOnExit:!0,children:(0,x.jsx)(g.xu,{ref:m,children:(0,x.jsx)("rect",{height:r.h,id:"preview",rx:4,ry:4,width:r.w,x:r.x,y:r.y},`${r.x}${r.y}`)})})]})}),(0,x.jsx)("rect",{fill:"rgba(0,0,0,0.5)",height:"100%",id:"shadowMask",mask:"url(#Mask)",width:"100%",x:"0",y:"0"}),(0,x.jsx)("use",{className:"v2cropSection","data-test-id":"cropper-section",fill:"rgba(0,0,0,0)",href:"#hole",id:"cropSection",stroke:"white",strokeWidth:"2",style:{cursor:"move"}})]}),a,(0,x.jsx)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},children:"select"!==P&&(0,x.jsx)(ef,{h:F.h,w:F.w,x:F.x,y:F.y})})]})}var eF=l(941023),eb=l(359829),eP=l(74678),eK=l(556872),eT=l(611304);let ej=void 0!==r?r:r=l(584411);function eL({cropArea:e,customCropper:a,imageSignature:l,imageSize:n,pinKey:i,showAnimation:t,trafficSource:r,viewParameter:s,viewType:o}){let d=(0,m.Z)(ej,i),[c,g]=(0,u.useState)("none"),[p,h]=(0,u.useState)(!1),[y,f]=(0,u.useState)({x:0,y:0,w:0,h:0}),[_,k]=(0,u.useState)({isCropAreaOnDotArea:!1,indexToHide:-1}),{indexToHide:S}=_,v=(0,u.useMemo)(()=>(d.visualObjects??[]).filter(e=>e.isStela).map(eT.Z),[d.visualObjects]);return(0,u.useEffect)(()=>{let a=v&&!!v.length,l=(0,eP.Z)({cropArea:e,scaledHeight:n.height??0,scaledWidth:n.width??0});a&&(g("dots"),k((0,eb.Z)(v,l)))},[e,n.height,n.width,v]),(0,x.jsx)(ew,{cropArea:e,imageSize:n,objectDetection:c,onChange:a,previewCropArea:y,showPreviewArea:!1,viewParameter:s,viewType:o,children:"dots"===c&&(0,x.jsx)(eF.Z,{currentSpotlightIdx:S,handleSpotlightClick:e=>{let{x:l,y:i,w:t,h:s,title:o}=v[e];a({cropArea:(0,eK.Z)({cropArea:{x:l,y:i,w:t,h:s},scaledHeight:n.height??0,scaledWidth:n.width??0}),cropSource:4,trafficSource:r,title:o||""})},handleSpotlightHover:e=>{if(e===S)return;let{x:a,y:l,w:i,h:t}=v[e];f((0,eK.Z)({cropArea:{x:a,y:l,w:i,h:t},scaledWidth:n.width??0,scaledHeight:n.height??0})),h(!0)},handleSpotlightUnhover:()=>{h(!1)},imageSignature:l,imageSize:n,pinKey:d,showAnimation:t,viewParameter:s,viewType:o})},JSON.stringify(e))}var eC=l(506662),eI=l(728994),eD=l(123998),eZ=l(572227),eE=l(351222),eA=l(378888),eR=l(870358),eM=l(85363),eO=l(845421),eN=l(588836),eU=l(425140);let ez=0,eH="",eB=void 0!==s?s:s=l(579652);function eG(e){let{imageSpec_564x:a,imageSpec_orig:l,imageSignature:n}=e,i=a&&l,{url:t}=i??{},r=i?.width??1,s=i?.height??void 0;return"number"==typeof r&&"number"==typeof s&&r>564&&(s*=564/r,r=564),{width:r,height:s,url:t,imageSignature:n}}let eV=({data:e,index:a,viewParameter:l,productsURL:n})=>{switch(e.type){case"pin":return(0,x.jsx)(eO.ZP,{duploQueryRef:null,pinId:e.id,slotIndex:a,viewParameter:l,viewType:72});case"story":return n&&(0,x.jsx)(C,{dangerouslySetActionUrl:n,slotIndex:a,story:e});default:return null}},eW=({resourceOptions:e})=>{let a=(0,h.ZP)(),{data:l,isAtEnd:n,isFetching:i,fetchMore:t}=(0,y.Z)({name:"VisualLiveSearchResource",options:e}),r=(0,c.TH)(),s=`${r.pathname}products/${r.search}`;return(0,x.jsxs)(u.Fragment,{children:[l&&(0,x.jsx)(eU.Z,{customLayoutType:"desktopFlashlight",feedItems:l.results||[],feedKey:"flashlight-dweb-unauth",pagination:{loadNext:t,hasNext:n,isLoadingNext:i,refetch:()=>void 0},renderFeedItem:(e,a)=>eV({data:e,index:a,viewParameter:3050,productsURL:s})}),(0,x.jsx)(g.xH,{accessibilityLabel:a._('Loading visual search results...', 'unauthDesktopVisualSearch.flashlightFeed.loading', 'Accessibility label for loading visual search results'),show:i})]})},e$=({resourceOptions:e})=>{let a=(0,h.ZP)(),{data:l,isAtEnd:n,isFetching:i,fetchMore:t}=(0,y.Z)({name:"VisualLiveSearchProductFeedResource",options:e});return(0,x.jsxs)(u.Fragment,{children:[l&&(0,x.jsx)(eU.Z,{customLayoutType:"desktopFlashlight",feedItems:l||[],feedKey:"flashlight-products-dweb-unauth",pagination:{loadNext:t,hasNext:n,isLoadingNext:i,refetch:()=>void 0},renderFeedItem:(e,a)=>eV({data:e,index:a,viewParameter:3334})}),(0,x.jsx)(g.xH,{accessibilityLabel:a._('Loading visual search product results...', 'unauthDesktopVisualSearch.flashlightProductFeed.loading', 'Accessibility label for loading visual search product results'),show:i})]})};function eY({pinKey:e}){let a=(0,h.ZP)(),{isRTL:l}=(0,ea.B)(),n=(0,z.Z)(),i=(0,c.k6)(),t=(0,c.TH)(),r=(0,u.useRef)(null),s=(0,c.$B)(),o=(0,eZ.Z)(),{pinId:d}=(0,f.Z)(s.params.id||""),p=(0,eA.mB)(t.search),y=(0,k.Z)(t),S=function(e){let a=parseInt(e??"",10);switch(a){case 1:case 2:case 3:case 4:case 5:case 6:return a;default:return}}(p.cropSource),v=(0,eC.hd)(t),w=(0,m.Z)(eB,e),{getNormalizedPinImage:F}=(0,eI.Z)({pinKey:w});if((0,u.useEffect)(()=>{if(!y&&w){let{width:e,height:a}=F(),l=(0,eM.Z)({cropArea:{h:a-2*eo.SP,w:e-2*eo.SP,x:eo.SP,y:eo.SP},isProductPage:v,pinId:d,surfaceType:"flashlight"});i.replace(l)}},[F,i,y,v,w,d]),(0,eS.Z)(()=>{n({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:d}})}),(0,u.useEffect)(()=>{let e=r.current;return e&&eH===d&&(e.scrollTop=ez),()=>{e&&(ez=e.scrollTop,eH=d)}}),!w)return(0,x.jsx)(eD.Z,{objectId:"",view:72,children:(0,x.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{top:eE.Pw}},position:"relative",children:(0,x.jsx)(g.xH,{accessibilityLabel:a._('Loading Pin data', 'unauthDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})})});let{imageSignature:b,description:P}=w,{width:K,height:T,url:j}=eG(w),L=function({initialCropArea:e,pin:a}){let l;if(e)l={...e};else{let{visualObjects:e}=a,{width:n=1,height:i=1}=eG(a);if(e&&e.length){let{x:a,y:t,w:r,h:s}=e[0];l=(0,eK.Z)({cropArea:{x:a,y:t,w:r,h:s},scaledWidth:n,scaledHeight:i})}else{let[e,a]=[n/6,i/6],[t,r]=[n-2*e,i-2*a];l={x:e,y:a,w:t,h:r}}}return{x:Math.floor(l.x??0),y:Math.floor(l.y??0),w:Math.floor(l.w??0),h:Math.floor(l.h??0)}}({initialCropArea:y,pin:w}),C=t.state&&t.state.internalNavigation,I=K+_.n,D=(I??1)+24,Z={pin_id:d,imageSignature:b,crop:(0,eP.Z)({cropArea:L,scaledWidth:K,scaledHeight:T}),crop_source:S||5},E={__style:{top:140}};return(0,x.jsx)(eD.Z,{objectId:"",view:72,children:(0,x.jsxs)(u.Fragment,{children:[(0,x.jsxs)(g.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{top:80}},display:"flex",height:60,position:"fixed",width:"100%",zIndex:new g.Ry(4),children:[(0,x.jsx)(g.xu,{left:!0,position:"absolute",children:(0,x.jsx)(eN.Z,{})}),(0,x.jsx)(g.xu,{flex:"grow",children:(0,x.jsx)(g.X6,{align:"center",size:"400",children:v?a._('Shop similar items', 'unauthDesktopFlashlightPage.flashlightProductsFeed.header', 'Header explaining results of flashlight products search'):a._('Visually similar results', 'unauthDesktopFlashlightPage.flashlightFeed.header', 'Header explaining results of flashlight search')})})]}),v?(0,x.jsx)(g.xu,{dangerouslySetInlineStyle:E,position:"relative",children:(0,x.jsx)(e$,{resourceOptions:Z})}):(0,x.jsxs)(g.xu,{display:"flex",paddingX:12,children:[(0,x.jsxs)(g.xu,{ref:r,dangerouslySetInlineStyle:E,height:"calc(100% - 140px)",marginEnd:3,marginStart:3,overflow:"auto",position:"fixed",width:I,zIndex:new g.Ry(4),children:[(0,x.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{width:K,height:T}},"data-test-id":"flashlight-enabled-image",children:(0,x.jsxs)(g.zd,{height:T,rounding:2,width:K,children:[j&&(0,x.jsx)(g.Ee,{alt:P??"",naturalHeight:T??1,naturalWidth:K??1,src:j}),(0,x.jsx)(eL,{cropArea:L,customCropper:function({cropArea:e,cropSource:a}){let l=window.location.pathname+window.location.search,n=(0,eM.Z)({cropArea:e,cropSource:a??6,isProductPage:v,pinId:d,surfaceType:"flashlight"});o({action:"trigger",item:"cropper-changed",within:"flashlight-page"}),n!==l&&d&&i.replace({pathname:`/pin/${d}/visual-search/`,search:(0,eR.Z)({cropArea:e,cropSource:a??6,surfaceType:"flashlight"}),state:{internalNavigation:!0}})},imageSignature:b??void 0,imageSize:{height:T,width:K},pinKey:w,showAnimation:!C,surfaceType:"flashlight",viewParameter:3050,viewType:72})]})}),(0,x.jsx)(g.xu,{"data-test-id":"closeupDescription",direction:"column",display:"flex",margin:5,maxWidth:K??1,position:"relative",children:(0,x.jsx)(es,{pageType:{isAuth:!1,page:"flashlight"},pinKey:w,viewportSize:"narrow"})})]}),(0,x.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{...E.__style,...l?{marginRight:`${D}px`}:{marginLeft:`${D}px`}}},position:"relative",width:"100%",children:(0,x.jsx)(eW,{resourceOptions:Z})})]})]})})}let eX=void 0!==o?o:o=l(514336),eQ=void 0!==d?d:d=l(165135);function eq(){let e=(0,c.$B)(),{pinId:a}=(0,f.Z)(e.params.id||""),l=(0,p.Z)({strategy:"LEGACY",query:eQ,variables:{pinId:a},useGetLegacyData:({pinId:e})=>(0,y.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0}}).data}),n=l?.v3GetPinQuery?.__typename==="V3GetPin"?l.v3GetPinQuery.data:null,i=(0,m.Z)(eX,n);return(0,x.jsx)(eY,{pinKey:i})}function eJ(){let e=(0,h.ZP)();return(0,x.jsx)(u.Suspense,{fallback:(0,x.jsx)(g.xH,{accessibilityLabel:e._('Loading Pin data', 'unauthDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0}),children:(0,x.jsx)(eq,{})})}},969686:function(e,a,l){l.d(a,{Z:()=>ex});var n,i,t,r,s,o,d,u,c=l(667294);l(167912);var g=l(616550),m=l(883119),p=l(355940),h=l(779548),y=l(801082),f=l(525839),_=l(900675),k=l(444185),x=l(634737),S=l(984126),v=l(583270),w=l(258193),F=l(642407),b=l(728994),P=l(378888),K=l(144633),T=l(74678),j=l(241646),L=l(980787),C=l(390843),I=l(785893);function D({arrowType:e,pinId:a,viewParameter:l,viewType:n}){let i=(0,f.ZP)(),t=(0,g.k6)(),{previous:r}=(0,C.Hv)(),{logContextEvent:s}=(0,L.v)();return(0,I.jsx)(m.xu,{"data-test-id":"go-back-button",children:(0,I.jsx)(m.hU,{accessibilityLabel:i._('Go back', 'Accessible icon for close button', 'Accessible icon for close button'),icon:e??"directional-arrow-left",iconColor:"darkGray",onClick:()=>{if(s({event_type:101,view_type:n,element:34,view_parameter:l}),0===r.length)return void t.replace(`/pin/${a}/`);t.goBack()}})})}var Z=l(37326),E=l(816358),A=l(645435);function R({isProductPage:e,pinId:a,title:l,viewParameter:n,viewType:i}){let t=(0,c.useRef)(null);return(0,c.useEffect)(()=>(t.current&&E.Z.addObstruction("top",t.current),()=>{t.current&&E.Z.removeObstruction("top",t.current)})),(0,I.jsx)(A.Z,{position:e?"sticky":"fixed",shouldShowShadow:!0,children:(0,I.jsxs)(m.xu,{color:"default",dangerouslySetInlineStyle:{__style:{paddingBottom:"12px"}},display:"flex",justifyContent:"center",children:[(0,I.jsx)(m.xu,{alignItems:"center",display:"flex",height:48,left:!0,marginStart:5,position:"absolute",right:!0,width:48,children:(0,I.jsx)(D,{arrowType:l?"directional-arrow-left":"cancel",pinId:a,viewParameter:n,viewType:i})}),(0,I.jsx)(m.xu,{ref:t,alignItems:"center",color:"default","data-test-id":"related-products-header",display:"flex",height:48,children:(0,I.jsx)(Z.Z,{title:l})})]})})}var M=l(527895),O=l(67831),N=l(956077),U=l(195717),z=l(359829),H=l(870358),B=l(936068),G=l(68408);let V=void 0!==n?n:n=l(934209);function W({cropArea:e,customCropper:a,imageContainerX:l=0,imageContainerY:n=0,imageSize:i,pinKey:t,surfaceType:r,trafficSource:s,viewParameter:o,viewType:d}){let u=(0,h.Z)(V,t),m=(0,g.k6)(),{bitmap_masks:p}=(0,G.Z)({pinKey:u})??{},[y,f]=(0,c.useState)("none"),[_,k]=(0,c.useState)(null),[x,S]=(0,c.useState)(null),v=(0,c.useMemo)(()=>(p??[]).flatMap(e=>{let{id:a,mask_bounds:l}=e,[n,i]=l?.[0]??[],[t,r]=l?.[1]??[];return void 0===n||void 0===i||void 0===t||void 0===r||void 0===a?[]:[{x:n,y:i,w:t,h:r,id:a}]}),[p]);return(0,c.useEffect)(()=>{let a=v&&!!v.length,l=(0,T.Z)({cropArea:e,scaledHeight:i.height??0,scaledWidth:i.width??0});if(a){let e=(0,z.Z)(v,l);f("cutouts"),S(e.indexToHide)}},[e,v,i.height,i.width]),(0,I.jsx)(U.Z,{cropArea:e,hoveredCutoutIndex:_,imageContainerX:l,imageContainerY:n,imageSize:i,objectDetection:y,onChange:a??(({cropArea:e,cropSource:a})=>{let l=a;if("cutouts"===y){let a=(0,T.Z)({cropArea:e,scaledHeight:i.height??0,scaledWidth:i.width??0}),{isCropAreaOnDotArea:n,indexToHide:t}=(0,z.Z)(v,a);n&&(l=9,S?.(t))}let n=window.location.search,t=(0,H.Z)({cropArea:e,cropSource:l,surfaceType:r,trafficSource:s});t!==n&&m.replace({pathname:window.location.pathname,search:t})}),setHoveredCutoutIndex:k,setSelectedCutoutIndex:S,viewParameter:o,viewType:d,children:"cutouts"===y&&(0,I.jsx)(B.Z,{bitmapMasks:p,hoveredCutoutIndex:_,imageContainerX:l,imageContainerY:n,pinKey:u,selectedCutoutIndex:x,setHoveredCutoutIndex:k,setSelectedCutoutIndex:S,surfaceType:r,trafficSource:s,viewParameter:o,viewType:d})})}let $=void 0!==i?i:i=l(984110);function Y({cropArea:e,description:a,height:l,imageContainerX:n,imageContainerY:i,imageUrl:t,pinKey:r,surfaceType:s,trafficSource:o,viewParameter:d,viewType:u,width:c}){let g=(0,h.Z)($,r),p=(0,O.E)();return(0,I.jsx)(m.xu,{"data-test-id":"flashlight-enabled-image",height:l,width:c,children:(0,I.jsxs)(m.zd,{height:l,rounding:4,width:c,children:[(0,I.jsx)(M.Z,{_enableViewTransitions:!0,type:"image",children:(0,I.jsx)(m.Ee,{alt:a,naturalHeight:l,naturalWidth:c,onLoad:()=>{(0,N.Nx)("visualSearchMainPinImageRender"),p&&p.markConstraintComplete("visualSearchMainPinImageRender")},src:t})}),(0,I.jsx)(W,{cropArea:e,imageContainerX:n,imageContainerY:i,imageSize:{height:l,width:c},pinKey:g,surfaceType:s,trafficSource:o,viewParameter:d,viewType:u})]})})}var X=l(742235),Q=l(780879),q=l(721465),J=l(288910);let ee=void 0!==t?t:t=l(758809);function ea({createAndAddCutoutToComposer:e,isFilterOpened:a,isProductOnlyFeed:l,oneBarModules:n,pinKey:i,selectPinForCutoutDrawer:t,surface:r,surfaceType:s,viewParameter:o,viewType:d,visualSearchFlashlightUnifiedResource:u}){let g=(0,h.Z)(ee,i),p="stl"===s||l,y=!l&&n&&n.length>0,{data:f}=u,_=f?.search_identifier;return(0,I.jsxs)(c.Fragment,{children:[y&&(0,I.jsx)(m.xu,{position:"relative",zIndex:new m.Ry(1),children:(0,I.jsx)(J.v,{children:(0,I.jsx)(Q.f,{children:(0,I.jsx)(X.default,{oneBarModulesKey:null,oneBarModulesRest:n,paddingX:8})})})}),(0,I.jsx)(q.Z,{commerceData:{is_product_only_feed:p},createAndAddCutoutToComposer:e,isFilterOpened:a,isProductFeed:p,pinKey:g,searchId:_,selectPinForCutoutDrawer:t,surface:r,viewParameter:o,viewType:d,visualSearchFlashlightUnifiedResource:u})]})}var el=l(676122),en=l(761578),ei=l(140725),et=l(93966),er=l(255957),es=l(123998),eo=l(341742);l(422578);var ed=l(431338);let eu=void 0!==r?r:r=l(85740);var ec=l(230543),eg=l(74459);let em=void 0!==s?s:s=l(829187);function ep({cropArea:e,cropSource:a,isProductPage:l,oneBarModules:n,pinKey:i,searchId:t,surfaceType:r,title:s,trafficSource:o,visualSearchFlashlightUnifiedResource:d}){let u=(0,h.Z)(em,i),{getNormalizedPinImage:p}=(0,b.Z)({pinKey:u,maxWidth:F.Wm}),y=(0,g.TH)(),{width:f=0}=(0,en.Z)()||{},_=(0,ec.t)(),k=(0,eg.Z)(),{imageContainerScrollTop:x,imageContainerScrollTopForPinId:S}=(0,el.t)(),v=(0,c.useRef)(null),[w,P]=(0,c.useState)(0),[K,T]=(0,c.useState)(0),{state:L}=y||{},{internalNavigation:C=!1}=L||{},{width:D,height:Z,url:E}=p(),A=D+j.n,M=l?0:A+48,O=f-k-M-j.n,N="flashlight"===r?l?427:72:427,U=9===a?3462:"flashlight"===r?3050:3455,z=function({isProductPage:e,pinKey:a,surfaceType:l,viewParameter:n,viewType:i}){let t=(0,h.Z)(eu,a);return{view_type:i,view_parameter:n,aux_data:(0,ed.Z)(t)({default:{is_product_only_feed:"stl"===l||e}})}}({isProductPage:l,pinKey:u,surfaceType:r,viewParameter:U,viewType:N}),H=()=>{let e=v.current;if(e){let{x:a,y:l}=e.getBoundingClientRect(),{scrollTop:n}=e;P(a),T(l-n)}};return(0,eo.Z)(()=>{H(),v.current&&0!==x.current&&S.current===u.entityId&&(v.current.scrollTop=x.current)}),(0,I.jsx)(er.Z,{constraints:l?[]:["visualSearchMainPinImageRender"],measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,I.jsx)(es.Z,{objectId:t,view:N,children:(0,I.jsx)(ei.Z,{log:z,children:(0,I.jsxs)(m.xu,{"data-test-id":"related-products",children:[(0,I.jsx)(R,{isProductPage:l,pinId:u.entityId,title:l?s:"",viewParameter:U,viewType:N}),!l&&(0,I.jsx)(m.xu,{ref:v,bottom:!0,dangerouslySetInlineStyle:{__style:{top:_+80,left:k,right:k}},height:"inherit",marginBottom:3,marginStart:12,onScroll:()=>{H(),x.current=v.current?.scrollTop||0,S.current=u.entityId},overflow:"auto",position:"fixed",width:A,children:(0,I.jsx)(Y,{cropArea:e,description:u.description??"",height:Z,imageContainerX:w,imageContainerY:K,imageSignature:u.imageSignature||"",imageUrl:E,pinKey:u,showAnimation:!C&&"flashlight"===r,surfaceType:r,trafficSource:o,viewParameter:U,viewType:N,width:D})}),(0,I.jsx)(m.xu,{dangerouslySetInlineStyle:{__style:{top:80*!l,left:M,right:M}},paddingX:et.jC,position:"relative",width:O,children:(0,I.jsx)(ea,{isProductOnlyFeed:l,oneBarModules:n,pinKey:u,surfaceType:r,viewParameter:U,viewType:N,visualSearchFlashlightUnifiedResource:d})})]})})})})}let eh=void 0!==o?o:o=l(553593);function ey({pinKey:e}){let a=(0,g.TH)(),l=(0,h.Z)(eh,e),{getNormalizedPinImage:n}=(0,b.Z)({pinKey:l,maxWidth:F.Wm}),{cropSource:i,entrypoint:t,full_feed_title:r="",surfaceType:s,filters:o,hybrid_search_param:d,journey_depth:u,search_query:m,source_module_id:p,requestParams:y,rs:f}=(0,P.mB)(a.search),{width:_,height:k}=n(),x=(0,c.useMemo)(()=>(0,v.Z)(a,_,k)??{x:0,y:0,w:_,h:k},[a,_,k]),S=(0,K.Z)(Number(i))||5,j=a.pathname.includes("/products"),{searchId:L,visualSearchFlashlightUnifiedResource:C,oneBarModules:D}=(0,w.Z)({resourceOptions:{crop:(0,T.Z)({cropArea:x,scaledWidth:_,scaledHeight:k}),crop_source:S,entry_source:j?"shopping":"flashlight",entrypoint:t||j&&"feed_module"||null,field_set_key:"shopping_grid_item",image_signature:l.imageSignature||void 0,is_shopping:j,pin_id:l.entityId,request_params:y,source:f,filters:o,hybrid_search_param:d,journey_depth:parseInt(u,10)||void 0,search_query:m,source_module_id:p}});return l?(0,I.jsx)(ep,{cropArea:x,cropSource:S,isProductPage:j,oneBarModules:D,pinKey:l,searchId:L,surfaceType:s||"flashlight",title:r,trafficSource:f,visualSearchFlashlightUnifiedResource:C}):null}let ef=void 0!==d?d:d=l(55575),e_=void 0!==u?u:u=l(376985);function ek({pinId:e,relatedProductsDataRef:a}){let l=(0,f.ZP)(),n=(0,y.Z)({strategy:"LEGACY",query:ef,variables:{pinId:e},useGetLegacyData:()=>{let{data:e}=(0,_.Z)(a);return e}}),i=n?.v3GetPinQuery?.__typename==="V3GetPin"?n.v3GetPinQuery.data:null,t=(0,h.Z)(e_,i);return(0,I.jsx)(c.Suspense,{fallback:(0,I.jsx)(m.xH,{accessibilityLabel:l._('Loading Pin data', 'RelatedProductsPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0}),children:t&&(0,I.jsx)(ey,{pinKey:t})})}function ex(){let e=(0,g.$B)(),{pinId:a}=(0,x.Z)(e.params.id||""),l=(0,k.Z)({name:"PinResource",options:{id:a,field_set_key:"detailed",fetch_visual_search_objects:!0}});return(0,I.jsx)(p.Z,{name:"RelatedProductsPage_RelatedProductsPageWrapper",children:(0,I.jsx)(c.Suspense,{fallback:(0,I.jsx)(S.Z,{}),children:(0,I.jsx)(ek,{pinId:a,relatedProductsDataRef:l})})})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/65704-8e45d0ccbea50b20.mjs.map